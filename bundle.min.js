!function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){var n,i=e("./chunker.js"),o=e("./texture.js"),a=e("./server.js");o.LoadTexture("./textures/stone.jpg"),r.CreateBlock=function(e){var t=new Object;return t.id=e,"undefined"!=typeof n?t.texture=n:(console.error("Stone Texture was not defined"),console.log(n)),t},r.Direction={north:1,east:2,south:3,west:4,up:5,down:6},r.SaveTexture=function(e){console.log("Texture being saved"),n=e,console.log(n),a.emit("loadedTextures")},r.IsSolid=function(e,t,r,n,o){if(block=i.GetBlock(e,t,r,n),void 0===block)return!1;if(1!=block.id)return!1;switch(o){case this.Direction.north:return!0;case this.Direction.east:return!0;case this.Direction.south:return!0;case this.Direction.west:return!0;case this.Direction.up:return!0;case this.Direction.down:return!0}return!1}},{"./chunker.js":2,"./server.js":163,"./texture.js":164}],2:[function(e,t,r){function n(e,t,r,n){e.push(t[0]),e.push(t[1]),e.push(t[2]),e.push(r[0]),e.push(r[1]),e.push(r[2]),e.push(n[0]),e.push(n[1]),e.push(n[2])}var i=e("ndarray"),o=e("./block.js");e("gl-vec3");r.Chunk=function(){var e=new Object;return e.size=16,e.dims=[e.size,e.size,e.size],e.data=i(new Array(e.dims[0]*e.dims[1]*e.dims[2]),e.dims),e.mesh=new Array,e.remesh=!1,console.log(e.mesh),console.log("Created Chunk"),e},r.CreateMesh=function(e){for(e.mesh.length=0,x=0;x<e.size;x++)for(y=0;y<e.size;y++)for(z=0;z<e.size;z++)"undefined"!=typeof this.GetBlock(e,x,y,z)&&this.GetBlock(e,x,y,z).id&&this.CreateCubeMesh(e,x,y,z,.5);e.remesh=0},r.CreateCubeMesh=function(e,t,r,i,a){points=new Array(8),points[0]=[t-a,r-a,i+a],points[1]=[t+a,r-a,i+a],points[2]=[t+a,r+a,i+a],points[3]=[t-a,r+a,i+a],points[4]=[t+a,r-a,i-a],points[5]=[t-a,r-a,i-a],points[6]=[t-a,r+a,i-a],points[7]=[t+a,r+a,i-a],o.IsSolid(e,t,r+1,i,o.Direction.down)||(n(e.mesh,points[3],points[2],points[7]),n(e.mesh,points[3],points[7],points[6])),o.IsSolid(e,t,r-1,i,o.Direction.up)||(n(e.mesh,points[5],points[4],points[1]),n(e.mesh,points[5],points[1],points[0])),o.IsSolid(e,t,r,i-1,o.Direction.north)||(n(e.mesh,points[4],points[5],points[6]),n(e.mesh,points[4],points[6],points[7])),o.IsSolid(e,t,r,i+1,o.Direction.south)||(n(e.mesh,points[0],points[1],points[2]),n(e.mesh,points[0],points[2],points[3])),o.IsSolid(e,t+1,r,i,o.Direction.west)||(n(e.mesh,points[1],points[4],points[7]),n(e.mesh,points[1],points[7],points[2])),o.IsSolid(e,t-1,r,i,o.Direction.east)||(n(e.mesh,points[5],points[0],points[3]),n(e.mesh,points[5],points[3],points[6]))},r.GetBlock=function(e,t,r,n){return t<e.size&&t>-1&&r<e.size&&r>-1&&n<e.size&&n>-1?e.data.get(t,r,n):void 0},r.SetBlock=function(e,t,r,n,i){e.data.set(t,r,n,i),e.remesh=!0}},{"./block.js":1,"gl-vec3":138,ndarray:160}],3:[function(e,t,r){var n=document.body.appendChild(document.createElement("canvas")),i=e("gl-clear")({color:[0,0,0,1]}),o=e("gl-context")(n),a=e("gl-buffer"),s=e("gl-mat4"),u=e("gl-shader"),l=e("game-shell")(),c=(e("path"),e("events"),e("ndarray"),e("./chunker.js")),f=e("./block.js"),h=e("gl-texture2d"),p=(e("./texture.js"),e("./server.js"));p.on("loadedTextures",function(){enginestatus.ResourcesLoaded=!0,console.log("ResourcesLoaded"),p.emit("ready")}),enginestatus={ResourcesLoaded:!1};var d,g,_,m,v,E;p.on("ready",function(){for(d=new c.Chunk,x=0;x<d.size;x++)for(y=0;y<d.size;y++)for(z=0;z<d.size;z++)c.SetBlock(d,x,y,z,new f.CreateBlock(1));c.SetBlock(d,0,0,0,new f.CreateBlock(1)),g=u(o,"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 aPosition;\n\nuniform mat4 uModelView;\nuniform mat4 uProjection;\n\nvoid main() {\n  gl_Position = uProjection * uModelView * vec4(aPosition, 1.0);\n}","precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvoid main() {\n\n  gl_FragColor = texture2D(texture, vec2(0.5, 0.5));  \n\n}"),_=s.create(),m=s.create(),v=a(o,new Float32Array(d.mesh)),v.length=d.mesh.length/3,E=h(o,c.GetBlock(d,0,0,0).texture),g.uniforms.texture=E.bind()}),l.on("render",function(){if(enginestatus.ResourcesLoaded){d.remesh&&(console.log("remeshing"),c.CreateMesh(d),v=a(o,new Float32Array(d.mesh)),v.length=d.mesh.length/3);var e=o.drawingBufferWidth,t=o.drawingBufferHeight;i(o),o.viewport(0,0,e,t),s.perspective(m,Math.PI/4,e/t,.1,100),s.identity(_,_),s.translate(_,_,[0,0,-50]),g.bind(),g.uniforms.uProjection=m,v.bind(),g.attributes.aPosition.pointer(),g.uniforms.uModelView=_,o.drawArrays(o.TRIANGLES,0,v.length)}}),window.addEventListener("resize",e("canvas-fit")(n),!1)},{"./block.js":1,"./chunker.js":2,"./server.js":163,"./texture.js":164,"canvas-fit":32,events:9,"game-shell":43,"gl-buffer":54,"gl-clear":67,"gl-context":68,"gl-mat4":79,"gl-shader":94,"gl-texture2d":126,ndarray:160,path:13}],4:[function(e,t,r){},{}],5:[function(e,t,r){(function(t){"use strict";function n(){try{var e=new Uint8Array(1);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?a(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new o(e,arguments[1]):new o(e)}function a(e,t){if(e=g(e,0>t?0:0|_(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;t>r;r++)e[r]=0;return e}function s(e,t,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|v(t,r);return e=g(e,n),e.write(t,r),e}function u(e,t){if(o.isBuffer(t))return l(e,t);if(Z(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return f(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?p(e,t):d(e,t)}function l(e,t){var r=0|_(t.length);return e=g(e,r),t.copy(e,0,0,r),e}function c(e,t){var r=0|_(t.length);e=g(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function f(e,t){var r=0|_(t.length);e=g(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function h(e,t){return t.byteLength,o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):e=f(e,new Uint8Array(t)),e}function p(e,t){var r=0|_(t.length);e=g(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function d(e,t){var r,n=0;"Buffer"===t.type&&Z(t.data)&&(r=t.data,n=0|_(r.length)),e=g(e,n);for(var i=0;n>i;i+=1)e[i]=255&r[i];return e}function g(e,t){o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):e.length=t;var r=0!==t&&t<=o.poolSize>>>1;return r&&(e.parent=Q),e}function _(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e,t){if(!(this instanceof m))return new m(e,t);var r=new o(e,t);return delete r.parent,r}function v(e,t){"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(n)return G(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var n=!1;if(t=0|t,r=void 0===r||r===1/0?this.length:0|r,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),t>=r)return"";for(;;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return L(this,t,r);case"binary":return M(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function E(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;n>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[r+a]=s}return a}function b(e,t,r,n){return q(G(t,e.length-r),e,r,n)}function w(e,t,r,n){return q(Y(t),e,r,n)}function A(e,t,r,n){return w(e,t,r,n)}function T(e,t,r,n){return q(H(t),e,r,n)}function R(e,t,r,n){return q(z(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?W.fromByteArray(e):W.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;r>i;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r>=i+s){var u,l,c,f;switch(s){case 1:128>o&&(a=o);break;case 2:u=e[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(a=f));break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(f=(15&o)<<12|(63&u)<<6|63&l,f>2047&&(55296>f||f>57343)&&(a=f));break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(f=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,f>65535&&1114112>f&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return I(n)}function I(e){var t=e.length;if(J>=t)return String.fromCharCode.apply(String,e);for(var r="",n=0;t>n;)r+=String.fromCharCode.apply(String,e.slice(n,n+=J));return r}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(127&e[i]);return n}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function N(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=t;r>o;o++)i+=X(e[o]);return i}function P(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function k(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||a>t)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range")}function C(e,t,r,n){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);o>i;i++)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function j(e,t,r,n){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);o>i;i++)e[r+i]=t>>>8*(n?i:3-i)&255}function O(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function F(e,t,r,n,i){return i||O(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,i){return i||O(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function B(e){if(e=V(e).replace($,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return 16>e?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;n>a;a++){if(r=e.charCodeAt(a),r>55295&&57344>r){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>r){if((t-=1)<0)break;o.push(r)}else if(2048>r){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(1114112>r))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function z(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function H(e){return W.toByteArray(B(e))}function q(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}var W=e("base64-js"),K=e("ieee754"),Z=e("isarray");r.Buffer=o,r.SlowBuffer=m,r.INSPECT_MAX_BYTES=50,o.poolSize=8192;var Q={};o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:n(),o._augment=function(e){return e.__proto__=o.prototype,e},o.TYPED_ARRAY_SUPPORT?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);a>i&&e[i]===t[i];)++i;return i!==a&&(r=e[i],n=t[i]),n>r?-1:r>n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Z(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new o(t),i=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(n,i),i+=a.length}return n},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function r(e,t,r){for(var n=-1,i=0;r+i<e.length;i++)if(e[r+i]===t[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===t.length)return r+n}else n=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return r(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):r(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=t,t=0|r,r=i}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(0>r||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return E(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return w(this,e,t,r);case"binary":return A(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;i>a;a++)n[a]=this[a+e]}return n.length&&(n.parent=this.parent||this),n},o.prototype.readUIntLE=function(e,t,r){e=0|e,t=0|t,r||k(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e=0|e,t=0|t,r||k(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e=0|e,t=0|t,r||k(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e=0|e,t=0|t,r||k(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),K.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),K.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),K.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),K.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){e=+e,t=0|t,r=0|r,n||U(this,e,t,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){e=+e,t=0|t,r=0|r,n||U(this,e,t,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);U(this,e,t,r,i-1,-i)}var o=0,a=1,s=0>e?1:0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);U(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t=0|t,r||U(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&t>r&&n>t)for(i=a-1;i>=0;i--)e[i+t]=this[i+r];else if(1e3>a||!o.TYPED_ARRAY_SUPPORT)for(i=0;a>i;i++)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},o.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),t>r)throw new RangeError("end < start");if(r!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var i=G(e.toString()),o=i.length;for(n=t;r>n;n++)this[n]=i[n%o]}return this}};var $=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":6,ieee754:7,isarray:8}],6:[function(e,t,r){!function(e){"use strict";function t(e){var t=c[e.charCodeAt(0)];return void 0!==t?t:-1}function r(e){function r(e){u[c++]=e}var n,i,o,a,s,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;s="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,u=new f(3*e.length/4-s),o=s>0?e.length-4:e.length;var c=0;for(n=0,i=0;o>n;n+=4,i+=3)a=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===s?(a=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&a)):1===s&&(a=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(a>>8&255),r(255&a)),u}function n(e){return l[e]}function i(e){return n(e>>18&63)+n(e>>12&63)+n(e>>6&63)+n(63&e)}function o(e,t,r){for(var n,o=[],a=t;r>a;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(i(n));return o.join("")}function a(e){var t,r,i,a=e.length%3,s="",u=[],l=16383;for(t=0,i=e.length-a;i>t;t+=l)u.push(o(e,t,t+l>i?i:t+l));switch(a){case 1:r=e[e.length-1],s+=n(r>>2),s+=n(r<<4&63),s+="==";break;case 2:r=(e[e.length-2]<<8)+e[e.length-1],s+=n(r>>10),s+=n(r>>4&63),s+=n(r<<2&63),s+="="}return u.push(s),u.join("")}var s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=[];for(s=0;s<u.length;s++)l[s]=u[s];var c=[];for(s=0;s<u.length;++s)c[u.charCodeAt(s)]=s;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63;var f="undefined"!=typeof Uint8Array?Uint8Array:Array;e.toByteArray=r,e.fromByteArray=a}("undefined"==typeof r?this.base64js={}:r)},{}],7:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[r+p]=255&a,p+=d,a/=256,l-=8);e[r+p-d]|=128*g}},{}],8:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],9:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(a(r))for(o=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,u=0;n>u;u++)l[u].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],10:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],11:[function(e,t,r){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],12:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],13:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,i="/"===a.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var i=r.isAbsolute(e),o="/"===a(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),o=n(t.split("/")),a=Math.min(i.length,o.length),s=a,u=0;a>u;u++)if(i[u]!==o[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:14}],14:[function(e,t,r){function n(){c=!1,s.length?l=s.concat(l):f=-1,l.length&&i()}function i(){if(!c){var e=setTimeout(n);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var s,u=t.exports={},l=[],c=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new o(e,t)),1!==l.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],15:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":16}],16:[function(e,t,r){"use strict";function n(e){return this instanceof n?(l.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),
void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var s=e("process-nextick-args"),u=e("core-util-is");u.inherits=e("inherits");var l=e("./_stream_readable"),c=e("./_stream_writable");u.inherits(n,l);for(var f=a(c.prototype),h=0;h<f.length;h++){var p=f[h];n.prototype[p]||(n.prototype[p]=c.prototype[p])}},{"./_stream_readable":18,"./_stream_writable":20,"core-util-is":21,inherits:10,"process-nextick-args":22}],17:[function(e,t,r){"use strict";function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":19,"core-util-is":21,inherits:10}],18:[function(e,t,r){(function(r){"use strict";function n(t,r){U=U||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof U&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(k||(k=e("string_decoder/").StringDecoder),this.decoder=new k(t.encoding),this.encoding=t.encoding)}function i(t){return U=U||e("./_stream_duplex"),this instanceof i?(this._readableState=new n(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void I.call(this)):new i(t)}function o(e,t,r,n,i){var o=l(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,c(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||i||n||(r=t.decoder.write(r)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&f(e)),p(e,t);else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function l(e,t){var r=null;return S.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,f(e)}}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(N("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?R(h,e):h(e))}function h(e){N("emit readable"),e.emit("readable"),y(e)}function p(e,t){t.readingMore||(t.readingMore=!0,R(d,e,t))}function d(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(N("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;N("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&L(e,"data")&&(t.flowing=!0,y(e))}}function _(e){N("readable nexttick read 0"),e.read(0)}function m(e,t){t.resumeScheduled||(t.resumeScheduled=!0,R(v,e,t))}function v(e,t){t.reading||(N("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;if(N("flow",t.flowing),t.flowing)do var r=e.read();while(null!==r&&t.flowing)}function E(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(a)r=n.shift();else if(!e||e>=i)r=o?n.join(""):1===n.length?n[0]:S.concat(n,i),n.length=0;else if(e<n[0].length){var s=n[0];r=s.slice(0,e),n[0]=s.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new S(e);for(var u=0,l=0,c=n.length;c>l&&e>u;l++){var s=n[0],f=Math.min(e-u,s.length);o?r+=s.slice(0,f):s.copy(r,u,0,f),f<s.length?n[0]=s.slice(f):n.shift(),u+=f}}return r}function b(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,R(w,t,e))}function w(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function A(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}function T(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}t.exports=i;var R=e("process-nextick-args"),x=e("isarray"),S=e("buffer").Buffer;i.ReadableState=n;var I,L=(e("events"),function(e,t){return e.listeners(t).length});!function(){try{I=e("stream")}catch(t){}finally{I||(I=e("events").EventEmitter)}}();var S=e("buffer").Buffer,M=e("core-util-is");M.inherits=e("inherits");var N,P=e("util");N=P&&P.debuglog?P.debuglog("stream"):function(){};var k;M.inherits(i,I);var U,U;i.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new S(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.isPaused=function(){return this._readableState.flowing===!1},i.prototype.setEncoding=function(t){return k||(k=e("string_decoder/").StringDecoder),this._readableState.decoder=new k(t),this._readableState.encoding=t,this};var C=8388608;i.prototype.read=function(e){N("read",e);var t=this._readableState,r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return N("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?b(this):f(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&b(this),null;var n=t.needReadable;N("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,N("length less than watermark",n)),(t.ended||t.reading)&&(n=!1,N("reading or ended",n)),n&&(N("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=u(r,t));var i;return i=e>0?E(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&b(this),null!==i&&this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){N("onunpipe"),e===f&&o()}function i(){N("onend"),e.end()}function o(){N("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",_),e.removeListener("error",s),e.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",a),m=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||_()}function a(t){N("ondata");var r=e.write(t);!1===r&&(1!==h.pipesCount||h.pipes[0]!==e||1!==f.listenerCount("data")||m||(N("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++),f.pause())}function s(t){N("onerror",t),c(),e.removeListener("error",s),0===L(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",l),c()}function l(){N("onfinish"),e.removeListener("close",u),c()}function c(){N("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,N("pipe count=%d opts=%j",h.pipesCount,t);var p=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,d=p?i:o;h.endEmitted?R(d):f.once("end",d),e.on("unpipe",n);var _=g(f);e.on("drain",_);var m=!1;return f.on("data",a),e._events&&e._events.error?x(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",u),e.once("finish",l),e.emit("pipe",f),h.flowing||(N("pipe resume"),f.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=T(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=I.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&f(this,n):R(_,this))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(N("resume"),e.flowing=!0,m(this,e)),this},i.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(N("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(N("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return A(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){N("wrapped _read",t),r&&(r=!1,e.resume())},n},i._fromList=E}).call(this,e("_process"))},{"./_stream_duplex":16,_process:14,buffer:5,"core-util-is":21,events:9,inherits:10,isarray:12,"process-nextick-args":22,"string_decoder/":29,util:4}],19:[function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":16,"core-util-is":21,inherits:10}],20:[function(e,t,r){"use strict";function n(){}function i(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function o(t,r){S=S||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof S&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function a(t){return S=S||e("./_stream_duplex"),this instanceof a||this instanceof S?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void R.call(this)):new a(t)}function s(e,t){var r=new Error("write after end");e.emit("error",r),w(t,r)}function u(e,t,r,n){var i=!0;if(!A.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),w(n,o),i=!1}return i}function l(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new A(t,r)),t}function c(e,t,r,n,o){r=l(t,r,n),A.isBuffer(r)&&(n="buffer");var a=t.objectMode?1:r.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new i(r,n,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest}else f(e,t,!1,a,r,n,o);return s}function f(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,r,n,i){--t.pendingcb,r?w(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(p(r),t)h(e,r,n,t,i);else{var o=v(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||m(e,r),n?w(g,e,r,o,i):g(e,r,o,i)}}function g(e,t,r,n){r||_(e,t),t.pendingcb--,n(),E(e,t)}function _(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){for(var n=[],i=[];r;)i.push(r.callback),n.push(r),r=r.next;t.pendingcb++,t.lastBufferedRequest=null,f(e,t,!0,t.length,n,"",function(e){for(var r=0;r<i.length;r++)t.pendingcb--,i[r](e)})}else{for(;r;){var o=r.chunk,a=r.encoding,s=r.callback,u=t.objectMode?1:o.length;if(f(e,t,!1,u,o,a,s),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function E(e,t){var r=v(t);return r&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),r}function b(e,t,r){t.ending=!0,E(e,t),r&&(t.finished?w(r):e.once("finish",r)),t.ended=!0}t.exports=a;var w=e("process-nextick-args"),A=e("buffer").Buffer;a.WritableState=o;var T=e("core-util-is");T.inherits=e("inherits");var R,x={deprecate:e("util-deprecate")};!function(){try{R=e("stream")}catch(t){}finally{R||(R=e("events").EventEmitter)}}();var A=e("buffer").Buffer;T.inherits(a,R);var S;o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var S;a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},a.prototype.write=function(e,t,r){var i=this._writableState,o=!1;return"function"==typeof t&&(r=t,t=null),A.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=n),i.ended?s(this,r):u(this,i,e,r)&&(i.pendingcb++,o=c(this,i,e,t,r)),o},a.prototype.cork=function(){var e=this._writableState;e.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},a.prototype._write=function(e,t,r){r(new Error("not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||b(this,n,r)}},{"./_stream_duplex":16,buffer:5,"core-util-is":21,events:9,inherits:10,"process-nextick-args":22,"util-deprecate":23}],21:[function(e,t,r){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===_(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function l(e){return void 0===e}function c(e){return"[object RegExp]"===_(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===_(e)}function p(e){return"[object Error]"===_(e)||e instanceof Error}function d(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function _(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=a,r.isString=s,r.isSymbol=u,r.isUndefined=l,r.isRegExp=c,r.isObject=f,r.isDate=h,r.isError=p,r.isFunction=d,r.isPrimitive=g,r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":11}],22:[function(e,t,r){(function(e){"use strict";function r(t){for(var r=new Array(arguments.length-1),n=0;n<r.length;)r[n++]=arguments[n];e.nextTick(function(){t.apply(null,r)})}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=r:t.exports=e.nextTick}).call(this,e("_process"))},{_process:14}],23:[function(e,t,r){(function(e){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null==n?!1:"true"===String(n).toLowerCase()}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,r){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":17}],25:[function(e,t,r){var n=function(){try{return e("stream")}catch(t){}}();r=t.exports=e("./lib/_stream_readable.js"),r.Stream=n||r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20}],26:[function(e,t,r){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":19}],27:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":20}],28:[function(e,t,r){function n(){i.call(this)}t.exports=n;var i=e("events").EventEmitter,o=e("inherits");o(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function n(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",r),e.removeListener("drain",n),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",r),e.on("drain",n),e._isStdio||t&&t.end===!1||(l.on("end",o),l.on("close",a));var c=!1;return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},{events:9,inherits:10,"readable-stream/duplex.js":15,"readable-stream/passthrough.js":24,"readable-stream/readable.js":25,"readable-stream/transform.js":26,"readable-stream/writable.js":27}],29:[function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=e("buffer").Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:5}],30:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],31:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&r._extend(n,t),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&x(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return y(i)||(i=u(e,i,n)),i}var o=l(e,t);if(o)return o;var a=Object.keys(t),g=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),R(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(x(t)){var _=t.name?": "+t.name:"";return e.stylize("[Function"+_+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(T(t))return e.stylize(Date.prototype.toString.call(t),"date");if(R(t))return c(t)}var m="",v=!1,E=["{","}"];if(d(t)&&(v=!0,E=["[","]"]),x(t)){var b=t.name?": "+t.name:"";m=" [Function"+b+"]"}if(w(t)&&(m=" "+RegExp.prototype.toString.call(t)),T(t)&&(m=" "+Date.prototype.toUTCString.call(t)),R(t)&&(m=" "+c(t)),0===a.length&&(!v||0==t.length))return E[0]+m+E[1];if(0>n)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var A;return A=v?f(e,t,n,g,a):a.map(function(r){return h(e,t,n,g,r,v)}),e.seen.pop(),p(A,m,E)}function l(e,t){if(b(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return v(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],a=0,s=t.length;s>a;++a)N(t,String(a))?o.push(h(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),N(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=_(r)?u(e,l.value,null):u(e,l.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function _(e){return null===e}function m(e){return null==e}function v(e){return"number"==typeof e}function y(e){return"string"==typeof e}function E(e){return"symbol"==typeof e}function b(e){return void 0===e}function w(e){return A(e)&&"[object RegExp]"===I(e)}function A(e){return"object"==typeof e&&null!==e}function T(e){return A(e)&&"[object Date]"===I(e)}function R(e){return A(e)&&("[object Error]"===I(e)||e instanceof Error)}function x(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function I(e){return Object.prototype.toString.call(e)}function L(e){return 10>e?"0"+e.toString(10):e.toString(10)}function M(){var e=new Date,t=[L(e.getHours()),L(e.getMinutes()),L(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var P=/%[sdj%]/g;r.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(P,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),s=n[r];o>r;s=n[++r])a+=_(s)||!A(s)?" "+s:" "+i(s);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(b(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var k,U={};r.debuglog=function(e){if(b(k)&&(k=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!U[e])if(new RegExp("\\b"+e+"\\b","i").test(k)){var n=t.pid;U[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else U[e]=function(){};return U[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=g,r.isNull=_,r.isNullOrUndefined=m,r.isNumber=v,r.isString=y,r.isSymbol=E,r.isUndefined=b,r.isRegExp=w,r.isObject=A,r.isDate=T,r.isError=R,r.isFunction=x,r.isPrimitive=S,r.isBuffer=e("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",M(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!A(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":30,_process:14,inherits:10}],32:[function(e,t,r){function n(e,t,r){function n(){var t=n.parent||e.parentNode;if("function"==typeof t)var r=t(o)||o,s=r[0],u=r[1];else if(t&&t!==document.body)var l=i(t),s=0|l[0],u=0|l[1];else var s=window.innerWidth,u=window.innerHeight;return a?(e.setAttribute("width",s*n.scale+"px"),e.setAttribute("height",u*n.scale+"px")):(e.width=s*n.scale,e.height=u*n.scale),e.style.width=s+"px",e.style.height=u+"px",n}var a="SVG"===e.nodeName.toUpperCase();return e.style.position=e.style.position||"absolute",e.style.top=0,e.style.left=0,n.scale=parseFloat(r||1),n.parent=t,n()}var i=e("element-size");t.exports=n;var o=new Float32Array(2)},{"element-size":33}],33:[function(e,t,r){function n(e){if(e===window||e===document.body)return[window.innerWidth,window.innerHeight];if(!e.parentNode){var t=!0;document.body.appendChild(e)}var r=e.getBoundingClientRect(),n=getComputedStyle(e),o=(0|r.height)+i(n.getPropertyValue("margin-top"))+i(n.getPropertyValue("margin-bottom")),a=(0|r.width)+i(n.getPropertyValue("margin-left"))+i(n.getPropertyValue("margin-right"));return t&&document.body.removeChild(e),[a,o]}function i(e){return parseFloat(e)||0}t.exports=n},{}],34:[function(e,t,r){"object"==typeof window.performance?window.performance.now?t.exports=function(){return window.performance.now()}:window.performance.webkitNow&&(t.exports=function(){return window.performance.webkitNow()}):Date.now?t.exports=Date.now:t.exports=function(){return(new Date).getTime()}},{}],35:[function(e,t,r){function n(e,t,r,n){e[i](a+t,"wheel"==o?r:function(e){!e&&(e=window.event);
var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==o?(t.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-1/40*e.wheelDeltaX)):t.deltaY=e.detail,r(t)},n||!1)}var i,o,a="";window.addEventListener?i="addEventListener":(i="attachEvent",a="on"),o="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",t.exports=function(e,t,r){n(e,o,t,r),"DOMMouseScroll"==o&&n(e,"MozMousePixelScroll",t,r)}},{}],36:[function(e,t,r){for(var n=0,i=["ms","moz","webkit","o"],o=0;o<i.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[i[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[o]+"CancelAnimationFrame"]||window[i[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),o=window.setTimeout(function(){e(r+i)},i);return n=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})},{}],37:[function(e,t,r){"use strict";function n(e,t,r,n,i,o){var a=["function ",e,"(a,l,h,",n.join(","),"){",o?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?t.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",t,"){i=m;"),r?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),o?a.push("return -1};"):a.push("return i};"),a.join("")}function i(e,t,r,i){var o=new Function([n("A","x"+e+"y",t,["y"],!1,i),n("B","x"+e+"y",t,["y"],!0,i),n("P","c(x,y)"+e+"0",t,["y","c"],!1,i),n("Q","c(x,y)"+e+"0",t,["y","c"],!0,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""));return o()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],38:[function(e,t,r){!function(e,r){"undefined"!=typeof t?t.exports=r():"function"==typeof define&&"object"==typeof define.amd?define(r):this[e]=r()}("domready",function(){var e,t=[],r=document,n=r.documentElement.doScroll,i="DOMContentLoaded",o=(n?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState);return o||r.addEventListener(i,e=function(){for(r.removeEventListener(i,e),o=1;e=t.shift();)e()}),function(e){o?setTimeout(e,0):t.push(e)}})},{}],39:[function(e,t,r){"use strict";function n(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}t.exports=n},{}],40:[function(e,t,r){"use strict";function n(e){for(var t=new Array(e),r=0;e>r;++r)t[r]=r;return t}t.exports=n},{}],41:[function(e,t,r){"use strict";function n(e,t){for(var r=1,n=e.length,i=e[0],o=e[0],a=1;n>a;++a)if(o=i,i=e[a],t(i,o)){if(a===r){r++;continue}e[r++]=i}return e.length=r,e}function i(e){for(var t=1,r=e.length,n=e[0],i=e[0],o=1;r>o;++o,i=n)if(i=n,n=e[o],n!==i){if(o===t){t++;continue}e[t++]=n}return e.length=t,e}function o(e,t,r){return 0===e.length?e:t?(r||e.sort(t),n(e,t)):(r||e.sort(),i(e))}t.exports=o},{}],42:[function(e,t,r){var n,i="undefined"!=typeof window?window.navigator.userAgent:"",o=/OS X/.test(i),a=/Opera/.test(i),s=!/like Gecko/.test(i)&&!a,u=t.exports={0:o?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:o?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num-->",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:o&&s?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:a?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(n=58;65>n;++n)u[n]=String.fromCharCode(n);for(n=48;58>n;++n)u[n]=n-48+"";for(n=65;91>n;++n)u[n]=String.fromCharCode(n);for(n=96;106>n;++n)u[n]="<num-"+(n-96)+">";for(n=112;136>n;++n)u[n]="F"+(n-111)},{}],43:[function(e,t,r){"use strict";function n(e){return j.eq(X,e)}function i(e){return n(V[e])}function o(){M.call(this),this._curKeyState=new Array(X.length),this._pressCount=new Array(X.length),this._releaseCount=new Array(X.length),this._tickInterval=null,this._rafHandle=null,this._tickRate=0,this._lastTick=B(),this._frameTime=0,this._paused=!0,this._width=0,this._height=0,this._wantFullscreen=!1,this._wantPointerLock=!1,this._fullscreenActive=!1,this._pointerLockActive=!1,this._render=p.bind(void 0,this),this.preventDefaults=!0,this.stopPropagation=!1;for(var e=0;e<X.length;++e)this._curKeyState[e]=!1,this._pressCount[e]=this._releaseCount[e]=0;this.element=null,this.bindings={},this.frameSkip=100,this.tickCount=0,this.frameCount=0,this.startTime=B(),this.tickTime=this._tickRate,this.frameTime=10,this.stickyFullscreen=!1,this.stickyPointerLock=!1,this.scroll=[0,0,0],this.mouseX=0,this.mouseY=0,this.prevMouseX=0,this.prevMouseY=0}function a(e,t,r){if(r in t){for(var i=t[r],o=0,a=i.length;a>o;++o)if(e[n(i[o])])return!0;return!1}var s=n(r);return s>=0?e[s]:!1}function s(e,t,r){if(r in t){for(var i=t[r],o=0,a=0,s=i.length;s>a;++a)o+=e[n(i[a])];return o}var u=n(r);return u>=0?e[u]:0}function u(e){var t=e.element;if(e._wantFullscreen&&!e._fullscreenActive){var r=t.requestFullscreen||t.requestFullScreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullscreen||t.mozRequestFullScreen||function(){};r.call(t)}if(e._wantPointerLock&&!e._pointerLockActive){var n=t.requestPointerLock||t.webkitRequestPointerLock||t.mozRequestPointerLock||t.msRequestPointerLock||t.oRequestPointerLock||function(){};n.call(t)}}function l(e){e._fullscreenActive=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1,!e.stickyFullscreen&&e._fullscreenActive&&(e._wantFullscreen=!1)}function c(e,t){e._pointerLockActive=e.element===(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||null),!e.stickyPointerLock&&e._pointerLockActive&&(e._wantPointerLock=!1)}function f(e,t,r){var n=e._curKeyState[t];n!==r&&(r?e._pressCount[t]++:e._releaseCount[t]++,e._curKeyState[t]=r)}function h(e){for(var t,r,n,i=B()+e.frameSkip,o=e._pressCount,a=e._releaseCount,s=e._tickRate,u=X.length;!e._paused&&B()>=e._lastTick+s;){if(B()>i)return void(e._lastTick=B()+s);for(r=B(),e.emit("tick"),n=B(),e.tickTime=n-r,++e.tickCount,e._lastTick+=s,t=0;u>t;++t)o[t]=a[t]=0;e._pointerLockActive?(e.prevMouseX=e.mouseX=e.width>>1,e.prevMouseY=e.mouseY=e.height>>1):(e.prevMouseX=e.mouseX,e.prevMouseY=e.mouseY),e.scroll[0]=e.scroll[1]=e.scroll[2]=0}}function p(e){e._rafHandle=requestAnimationFrame(e._render),h(e);var t;t=e._paused?e._frameTime:F(1,(B()-e._lastTick)/e._tickRate),++e.frameCount;var r=B();e.emit("render",t);var n=B();e.frameTime=n-r}function d(e){return document.activeElement===document.body||document.activeElement===e.element}function g(e,t){e.preventDefaults&&t.preventDefault(),e.stopPropagation&&t.stopPropagation()}function _(e,t){g(e,t);var r=i(t.keyCode||t["char"]||t.which||t.charCode);r>=0&&f(e,r,!1)}function m(e,t){if(d(e))if(g(e,t),t.metaKey)x(e,t);else{var r=i(t.keyCode||t["char"]||t.which||t.charCode);r>=0&&f(e,r,!0)}}function v(e,t){for(var r=0;32>r;++r)f(e,H[r],!!(t&1<<r))}function y(e,t){if(g(e,t),e._pointerLockActive){var r=t.movementX||t.mozMovementX||t.webkitMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||0;e.mouseX+=r,e.mouseY+=n}else e.mouseX=t.clientX-e.element.offsetLeft,e.mouseY=t.clientY-e.element.offsetTop;return!1}function E(e,t){return g(e,t),f(e,H[t.button],!0),!1}function b(e,t){return g(e,t),f(e,H[t.button],!1),!1}function w(e,t){return g(e,t),e._pointerLockActive?(e.prevMouseX=e.mouseX=e.width>>1,e.prevMouseY=e.mouseY=e.height>>1):(e.prevMouseX=e.mouseX=t.clientX-e.element.offsetLeft,e.prevMouseY=e.mouseY=t.clientY-e.element.offsetTop),!1}function A(e,t){return g(e,t),v(e,0),!1}function T(e,t){g(e,t);var r=1;switch(t.deltaMode){case 0:r=1;break;case 1:r=12;break;case 2:r=e.height}return e.scroll[0]+=t.deltaX*r,e.scroll[1]+=t.deltaY*r,e.scroll[2]+=t.deltaZ*r||0,!1}function R(e,t){return g(e,t),!1}function x(e,t){var r,n=X.length,i=e._curKeyState,o=e._releaseCount;for(r=0;n>r;++r)i[r]&&++o[r],i[r]=!1;return!1}function S(e,t){var r=0|e.element.clientWidth,n=0|e.element.clientHeight;(r!==e._width||n!==e._height)&&(e._width=r,e._height=n,e.emit("resize",r,n))}function I(){var e=document.createElement("div");return e.tabindex=1,e.style.position="absolute",e.style.left="0px",e.style.right="0px",e.style.top="0px",e.style.bottom="0px",e.style.height="100%",e.style.overflow="hidden",document.body.appendChild(e),document.body.style.overflow="hidden",document.body.style.height="100%",e}function L(e){e=e||{};var t=!!e.fullscreen,r=t;void 0!==typeof e.pointerLock&&(r=!!e.pointerLock);var n=new o;return n._tickRate=e.tickRate||30,n.frameSkip=e.frameSkip||5*(n._tickRate+5),n.stickyFullscreen=!!e.stickyFullscreen||!!e.sticky,n.stickyPointerLock=!!e.stickyPointerLock||!!e.sticky,e.bindings&&(n.bindings=e.bindings),setTimeout(function(){P(function(){var i=e.element;if("string"==typeof i){var o=document.querySelector(i);o||(o=document.getElementById(i)),o||(o=document.getElementByClass(i)[0]),o||(o=I()),n.element=o}else"object"==typeof i&&i?n.element=i:"function"==typeof i?n.element=i():n.element=I();n.element.style&&(n.element.style["-webkit-touch-callout"]="none",n.element.style["-webkit-user-select"]="none",n.element.style["-khtml-user-select"]="none",n.element.style["-moz-user-select"]="none",n.element.style["-ms-user-select"]="none",n.element.style["user-select"]="none"),n._width=n.element.clientWidth,n._height=n.element.clientHeight;var a=S.bind(void 0,n);if("undefined"!=typeof MutationObserver){var s=new MutationObserver(a);s.observe(n.element,{attributes:!0,subtree:!0})}else n.element.addEventListener("DOMSubtreeModified",a,!1);window.addEventListener("resize",a,!1),window.addEventListener("keydown",m.bind(void 0,n),!1),window.addEventListener("keyup",_.bind(void 0,n),!1),n.element.oncontextmenu=R.bind(void 0,n),n.element.addEventListener("mousedown",E.bind(void 0,n),!1),n.element.addEventListener("mouseup",b.bind(void 0,n),!1),n.element.addEventListener("mousemove",y.bind(void 0,n),!1),n.element.addEventListener("mouseenter",w.bind(void 0,n),!1);var f=A.bind(void 0,n);n.element.addEventListener("mouseleave",f,!1),n.element.addEventListener("mouseout",f,!1),window.addEventListener("mouseleave",f,!1),window.addEventListener("mouseout",f,!1);var h=x.bind(void 0,n);n.element.addEventListener("blur",h,!1),n.element.addEventListener("focusout",h,!1),n.element.addEventListener("focus",h,!1),window.addEventListener("blur",h,!1),window.addEventListener("focusout",h,!1),window.addEventListener("focus",h,!1),D(n.element,T.bind(void 0,n),!1);var p=l.bind(void 0,n);document.addEventListener("fullscreenchange",p,!1),document.addEventListener("mozfullscreenchange",p,!1),document.addEventListener("webkitfullscreenchange",p,!1),n.element.addEventListener("click",u.bind(void 0,n),!1);var d=c.bind(void 0,n);document.addEventListener("pointerlockchange",d,!1),document.addEventListener("mozpointerlockchange",d,!1),document.addEventListener("webkitpointerlockchange",d,!1),document.addEventListener("pointerlocklost",d,!1),document.addEventListener("webkitpointerlocklost",d,!1),document.addEventListener("mozpointerlocklost",d,!1),n.fullscreen=t,n.pointerLock=r,n.bind("mouse-left","mouse-1"),n.bind("mouse-right","mouse-3"),n.bind("mouse-middle","mouse-2"),n._lastTick=B(),n.startTime=B(),n.paused=!1,n.emit("init")})},0),n}var M=e("events").EventEmitter,N=e("util"),P=e("domready"),k=e("vkey"),U=e("invert-hash"),C=e("uniq"),j=e("binary-search-bounds"),O=e("iota-array"),F=Math.min;e("./lib/raf-polyfill.js");var D=e("./lib/mousewheel-polyfill.js"),B=e("./lib/hrtime-polyfill.js"),V=function(){var e,t,r=new Array(256);for(e=0;256>e;++e)r[e]="UNK";for(e in k)t=k[e],"<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&(t=t.substring(1,t.length-1)),t=t.replace(/\s/g,"-"),r[parseInt(e)]=t;return r}(),X=C(Object.keys(U(V)));N.inherits(o,M);var G=o.prototype;G.keyNames=X,G.bind=function(e){var t;t=e in this.bindings?this.bindings[e]:[];for(var r,i=1,o=arguments.length;o>i;++i)if(r=arguments[i],n(r)>=0)t.push(r);else if(r in this.bindings)for(var a=this.bindings[r],s=0;s<a.length;++s)t.push(a[s]);t=C(t),t.length>0&&(this.bindings[e]=t),this.emit("bind",e,t)},G.unbind=function(e){e in this.bindings&&delete this.bindings[e],this.emit("unbind",e)},G.down=function(e){return a(this._curKeyState,this.bindings,e)},G.wasDown=function(e){return this.down(e)||!!this.press(e)},G.up=function(e){return!this.down(e)},G.wasUp=function(e){return this.up(e)||!!this.release(e)},G.press=function(e){return s(this._pressCount,this.bindings,e)},G.release=function(e){return s(this._releaseCount,this.bindings,e)},Object.defineProperty(G,"paused",{get:function(){return this._paused},set:function(e){var t=!!e;t!==this._paused&&(this._paused?(this._paused=!1,this._lastTick=B()-Math.floor(this._frameTime*this._tickRate),this._tickInterval=setInterval(h,this._tickRate,this),this._rafHandle=requestAnimationFrame(this._render)):(this._paused=!0,this._frameTime=F(1,(B()-this._lastTick)/this._tickRate),clearInterval(this._tickInterval)))}});var Y=document.exitFullscreen||document.cancelFullscreen||document.cancelFullScreen||document.webkitCancelFullscreen||document.webkitCancelFullScreen||document.mozCancelFullscreen||document.mozCancelFullScreen||function(){};Object.defineProperty(G,"fullscreen",{get:function(){return this._fullscreenActive},set:function(e){var t=!!e;return t?(this._wantFullscreen=!0,u(this)):(this._wantFullscreen=!1,Y.call(document)),this._fullscreenActive}});var z=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock||function(){};Object.defineProperty(G,"pointerLock",{get:function(){return this._pointerLockActive},set:function(e){var t=!!e;return t?(this._wantPointerLock=!0,u(this)):(this._wantPointerLock=!1,z.call(document)),this._pointerLockActive}}),Object.defineProperty(G,"width",{get:function(){return this.element.clientWidth}}),Object.defineProperty(G,"height",{get:function(){return this.element.clientHeight}});var H=O(32).map(function(e){return n("mouse-"+(e+1))});t.exports=L},{"./lib/hrtime-polyfill.js":34,"./lib/mousewheel-polyfill.js":35,"./lib/raf-polyfill.js":36,"binary-search-bounds":37,domready:38,events:9,"invert-hash":39,"iota-array":40,uniq:41,util:31,vkey:42}],44:[function(e,t,r){(function(r,n){"use strict";function i(e,t){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var n=e.getContext("2d");n.drawImage(r,0,0);var i=n.getImageData(0,0,r.width,r.height);t(null,c(new Uint8Array(i.data),[r.width,r.height,4],[4,4*r.width,1],0))},r.onerror=function(e){t(e)},r.src=e}function o(e,t){var r;try{r=new f(e)}catch(n){return void t(n)}if(r.numFrames()>0){var i=[r.numFrames(),r.height,r.width,4],o=new Uint8Array(i[0]*i[1]*i[2]*i[3]),a=c(o,i);try{for(var s=0;s<r.numFrames();++s)r.decodeAndBlitFrameRGBA(s,o.subarray(a.index(s,0,0,0),a.index(s+1,0,0,0)))}catch(n){return void t(n)}t(null,a.transpose(0,2,1))}else{var i=[r.height,r.width,4],o=new Uint8Array(i[0]*i[1]*i[2]),a=c(o,i);try{r.decodeAndBlitFrameRGBA(0,o)}catch(n){return void t(n)}t(null,a.transpose(1,0))}}function a(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.overrideMimeType&&r.overrideMimeType("application/binary"),r.onerror=function(e){t(e)},r.onload=function(){if(4===r.readyState){var e=new Uint8Array(r.response);o(e,t)}},r.send()}function s(e){if(void 0===e[0]){for(var t=e.length,r=new Uint8Array(t),n=0;t>n;++n)r[n]=e.get(n);return r}return new Uint8Array(e)}function u(e,t){n.nextTick(function(){try{var r=h(e);r?o(s(r),t):t(new Error("Error parsing data URI"))}catch(n){t(n)}})}var l=e("path"),c=e("ndarray"),f=e("omggif").GifReader,h=(e("ndarray-pack"),e("through"),e("data-uri-to-buffer"));t.exports=function(e,t,n){n||(n=t,t="");var o=l.extname(e);switch(t||o.toUpperCase()){case".GIF":a(e,n);break;default:r.isBuffer(e)&&(e="data:"+t+";base64,"+e.toString("base64")),0===e.indexOf("data:image/gif;")?u(e,n):i(e,n)}}}).call(this,{isBuffer:e("../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")},e("_process"))},{"../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":11,_process:14,"data-uri-to-buffer":45,ndarray:160,"ndarray-pack":46,omggif:52,path:13,through:53}],45:[function(e,t,r){(function(e){function r(t){if(!/^data\:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");var r=t.indexOf(",");if(-1===r||4>=r)throw new TypeError("malformed data: URI");for(var n=t.substring(5,r).split(";"),i=!1,o="US-ASCII",a=0;a<n.length;a++)"base64"==n[a]?i=!0:0==n[a].indexOf("charset=")&&(o=n[a].substring(8));var s=unescape(t.substring(r+1)),u=i?"base64":"ascii",l=new e(s,u);return l.type=n[0]||"text/plain",l.charset=o,l}t.exports=r}).call(this,e("buffer").Buffer)},{buffer:5}],46:[function(e,t,r){"use strict";var n=e("ndarray"),i=e("./doConvert.js");t.exports=function(e,t){for(var r=[],o=e,a=1;o instanceof Array;)r.push(o.length),a*=o.length,o=o[0];return 0===r.length?n():(t||(t=n(new Float64Array(a),r)),i(t,e),t)}},{"./doConvert.js":47,ndarray:160}],47:[function(e,t,r){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":48}],48:[function(e,t,r){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new n;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var i=0;i<r.length;++i){var a=r[i];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===a){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,o(t)}var o=e("./lib/thunk.js");t.exports=i},{"./lib/thunk.js":50}],49:[function(e,t,r){"use strict";function n(e,t,r){var n,i,o=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,u=[],l=[],c=0,f=0;for(n=0;o>n;++n)l.push(["i",n,"=0"].join(""));for(i=0;a>i;++i)for(n=0;o>n;++n)f=c,c=e[n],0===n?l.push(["d",i,"s",n,"=t",i,"p",c].join("")):l.push(["d",i,"s",n,"=(t",i,"p",c,"-s",f,"*t",i,"p",f,")"].join(""));for(u.push("var "+l.join(",")),n=o-1;n>=0;--n)c=e[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;o>n;++n){for(f=c,c=e[n],i=0;a>i;++i)u.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function i(e,t,r,i){for(var o=t.length,a=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,l=[],c=0;a>c;++c)l.push(["var offset",c,"=p",c].join(""));for(var c=e;o>c;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",s,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",s].join("")),l.push(["j",c,"-=",s,"}"].join("")),u&&l.push(["index[",t[c],"]=j",c].join(""));for(var c=0;a>c;++c){for(var f=["offset"+c],h=e;o>h;++h)f.push(["j",h,"*t",c,"p",t[h]].join(""));l.push(["p",c,"=(",f.join("+"),")"].join(""))}l.push(n(t,r,i));for(var c=e;o>c;++c)l.push("}");return l.join("\n")}function o(e){for(var t=0,r=e[0].length;r>t;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function a(e,t,r){for(var n=e.body,i=[],o=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",c=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a),h=t.offsetArgs[f];c=h.array,l="+q"+f;case"array":l="p"+c+l;var p="l"+a,d="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(i.push(["var ",p,"=",d,".get(",l,")"].join("")),n=n.replace(u,p),o.push([d,".set(",l,",",p,")"].join(""))):n=n.replace(u,[d,".get(",l,")"].join("")):n=n.replace(u,[d,"[",l,"]"].join("")):"generic"===r[c]?(i.push(["var ",p,"=",d,".get(",l,")"].join("")),n=n.replace(u,p),s.lvalue&&o.push([d,".set(",l,",",p,")"].join(""))):(i.push(["var ",p,"=",d,"[",l,"]"].join("")),n=n.replace(u,p),s.lvalue&&o.push([d,"[",l,"]=",p].join("")));else{for(var g=[s.name],_=[l],m=0;m<Math.abs(t.arrayBlockIndices[c]);m++)g.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(m+1)+"*t"+c+"b"+m);if(u=new RegExp(g.join(""),"g"),l=_.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[d,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var i=e[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[n]="u"+i.charAt(1)+o:t[n]=i.charAt(0)+o,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function u(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,u=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),f=0;f<e.arrayArgs.length;++f)c[f]=t[2*f],u[f]=t[2*f+1];for(var h=[],p=[],d=[],g=[],_=[],f=0;f<e.arrayArgs.length;++f){e.arrayBlockIndices[f]<0?(d.push(0),g.push(r),h.push(r),p.push(r+e.arrayBlockIndices[f])):(d.push(e.arrayBlockIndices[f]),g.push(e.arrayBlockIndices[f]+r),h.push(0),p.push(e.arrayBlockIndices[f]));for(var m=[],v=0;v<u[f].length;v++)d[f]<=u[f][v]&&u[f][v]<g[f]&&m.push(u[f][v]-d[f]);_.push(m)}for(var y=["SS"],E=["'use strict'"],b=[],v=0;r>v;++v)b.push(["s",v,"=SS[",v,"]"].join(""));for(var f=0;f<e.arrayArgs.length;++f){y.push("a"+f),y.push("t"+f),y.push("p"+f);for(var v=0;r>v;++v)b.push(["t",f,"p",v,"=t",f,"[",d[f]+v,"]"].join(""));for(var v=0;v<Math.abs(e.arrayBlockIndices[f]);++v)b.push(["t",f,"b",v,"=t",f,"[",h[f]+v,"]"].join(""))}for(var f=0;f<e.scalarArgs.length;++f)y.push("Y"+f);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var w=new Array(r),f=0;r>f;++f)w[f]="0";b.push(["index=[",w.join(","),"]"].join(""))}for(var f=0;f<e.offsetArgs.length;++f){for(var A=e.offsetArgs[f],T=[],v=0;v<A.offset.length;++v)0!==A.offset[v]&&(1===A.offset[v]?T.push(["t",A.array,"p",v].join("")):T.push([A.offset[v],"*t",A.array,"p",v].join("")));0===T.length?b.push("q"+f+"=0"):b.push(["q",f,"=",T.join("+")].join(""))}var R=l([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));b=b.concat(R),E.push("var "+b.join(","));for(var f=0;f<e.arrayArgs.length;++f)E.push("p"+f+"|=0");e.pre.body.length>3&&E.push(a(e.pre,e,c));var x=a(e.body,e,c),S=o(_);r>S?E.push(i(S,_[0],e,x)):E.push(n(_[0],e,x)),e.post.body.length>3&&E.push(a(e.post,e,c)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+E.join("\n")+"\n----------");var I=[e.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",S,s(c)].join(""),L=new Function(["function ",I,"(",y.join(","),"){",E.join("\n"),"} return ",I].join(""));return L()}var l=e("uniq");t.exports=u},{uniq:51}],50:[function(e,t,r){"use strict";function n(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<e.arrayArgs.length;++c){var f=e.arrayArgs[c];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),c>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var h=new Function("compile",t.join("\n"));return h(i.bind(void 0,e))}var i=e("./compile.js");t.exports=n},{"./compile.js":49}],51:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{dup:41}],52:[function(e,t,r){function n(e,t,r,n){function o(e){var t=e.length;if(2>t||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}var a=0,n=void 0===n?{}:n,s=void 0===n.loop?null:n.loop,u=void 0===n.palette?null:n.palette;if(0>=t||0>=r||t>65535||r>65535)throw"Width/Height invalid.";e[a++]=71,e[a++]=73,e[a++]=70,e[a++]=56,e[a++]=57,e[a++]=97;var l=0,c=0;if(null!==u){for(var f=o(u);f>>=1;)++l;if(f=1<<l,--l,void 0!==n.background){if(c=n.background,c>=f)throw"Background index out of range.";if(0===c)throw"Background index explicitly passed as 0."}}if(e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=(null!==u?128:0)|l,e[a++]=c,e[a++]=0,null!==u)for(var h=0,p=u.length;p>h;++h){var d=u[h];e[a++]=d>>16&255,e[a++]=d>>8&255,e[a++]=255&d}if(null!==s){if(0>s||s>65535)throw"Loop count invalid.";e[a++]=33,e[a++]=255,e[a++]=11,e[a++]=78,e[a++]=69,e[a++]=84,e[a++]=83,e[a++]=67,e[a++]=65,e[a++]=80,e[a++]=69,e[a++]=50,e[a++]=46,e[a++]=48,e[a++]=3,e[a++]=1,e[a++]=255&s,e[a++]=s>>8&255,e[a++]=0}var g=!1;this.addFrame=function(t,r,n,s,l,c){if(g===!0&&(--a,g=!1),c=void 0===c?{}:c,0>t||0>r||t>65535||r>65535)throw"x/y invalid.";if(0>=n||0>=s||n>65535||s>65535)throw"Width/Height invalid.";if(l.length<n*s)throw"Not enough pixels for the frame size.";var f=!0,h=c.palette;if((void 0===h||null===h)&&(f=!1,h=u),void 0===h||null===h)throw"Must supply either a local or global palette.";for(var p=o(h),d=0;p>>=1;)++d;p=1<<d;var _=void 0===c.delay?0:c.delay,m=void 0===c.disposal?0:c.disposal;if(0>m||m>3)throw"Disposal out of range.";var v=!1,y=0;if(void 0!==c.transparent&&null!==c.transparent&&(v=!0,y=c.transparent,0>y||y>=p))throw"Transparent color index.";if((0!==m||v||0!==_)&&(e[a++]=33,e[a++]=249,e[a++]=4,e[a++]=m<<2|(v===!0?1:0),e[a++]=255&_,e[a++]=_>>8&255,e[a++]=y,e[a++]=0),e[a++]=44,e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=255&s,e[a++]=s>>8&255,e[a++]=f===!0?128|d-1:0,f===!0)for(var E=0,b=h.length;b>E;++E){var w=h[E];e[a++]=w>>16&255,e[a++]=w>>8&255,e[a++]=255&w}a=i(e,a,2>d?2:d,l)},this.end=function(){return g===!1&&(e[a++]=59,g=!0),a}}function i(e,t,r,n){function i(r){for(;h>=r;)e[t++]=255&p,p>>=8,h-=8,t===a+256&&(e[a]=255,a=t++)}function o(e){p|=e<<h,h+=f,i(8)}e[t++]=r;var a=t++,s=1<<r,u=s-1,l=s+1,c=l+1,f=r+1,h=0,p=0,d=n[0]&u,g={};o(s);for(var _=1,m=n.length;m>_;++_){var v=n[_]&u,y=d<<8|v,E=g[y];if(void 0===E){for(p|=d<<h,h+=f;h>=8;)e[t++]=255&p,p>>=8,h-=8,t===a+256&&(e[a]=255,a=t++);4096===c?(o(s),c=l+1,f=r+1,g={}):(c>=1<<f&&++f,g[y]=c++),d=v}else d=E}return o(d),o(l),i(1),a+1===t?e[a]=0:(e[a]=t-a-1,e[t++]=0),t}function o(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!==(e[t++]+1&253)||97!==e[t++])throw"Invalid GIF 87a/89a header.";var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,s=7&i,u=1<<s+1;e[t++];e[t++];var l=null;o&&(l=t,t+=3*u);var c=!0,f=[],h=0,p=null,d=0,g=null;for(this.width=r,this.height=n;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,
g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){var _=e[t++];if(0===_)break;t+=_}break;case 249:if(4!==e[t++]||0!==e[t+4])throw"Invalid graphics extension block.";var m=e[t++];h=e[t++]|e[t++]<<8,p=e[t++],0===(1&m)&&(p=null),d=m>>2&7,t++;break;case 254:for(;;){var _=e[t++];if(0===_)break;t+=_}break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++],A=w>>7,T=w>>6&1,R=7&w,x=1<<R+1,S=l,I=!1;if(A){var I=!0;S=t,t+=3*x}var L=t;for(t++;;){var _=e[t++];if(0===_)break;t+=_}f.push({x:v,y:y,width:E,height:b,has_local_palette:I,palette_offset:S,data_offset:L,data_length:t-L,transparent_index:p,interlaced:!!T,delay:h,disposal:d});break;case 59:c=!1;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16)}this.numFrames=function(){return f.length},this.loopCount=function(){return g},this.frameInfo=function(e){if(0>e||e>=f.length)throw"Frame index out of range.";return f[e]},this.decodeAndBlitFrameBGRA=function(t,n){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);a(e,i.data_offset,s,o);var u=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,f=r-c,h=c,p=4*(i.y*r+i.x),d=4*((i.y+i.height)*r+i.x),g=p,_=4*f;i.interlaced===!0&&(_+=4*r*7);for(var m=8,v=0,y=s.length;y>v;++v){var E=s[v];if(0===h&&(g+=_,h=c,g>=d&&(_=4*f+4*r*(m-1),g=p+(c+f)*(m<<1),m>>=1)),E===l)g+=4;else{var b=e[u+3*E],w=e[u+3*E+1],A=e[u+3*E+2];n[g++]=A,n[g++]=w,n[g++]=b,n[g++]=255}--h}},this.decodeAndBlitFrameRGBA=function(t,n){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);a(e,i.data_offset,s,o);var u=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,f=r-c,h=c,p=4*(i.y*r+i.x),d=4*((i.y+i.height)*r+i.x),g=p,_=4*f;i.interlaced===!0&&(_+=4*r*7);for(var m=8,v=0,y=s.length;y>v;++v){var E=s[v];if(0===h&&(g+=_,h=c,g>=d&&(_=4*f+4*r*(m-1),g=p+(c+f)*(m<<1),m>>=1)),E===l)g+=4;else{var b=e[u+3*E],w=e[u+3*E+1],A=e[u+3*E+2];n[g++]=b,n[g++]=w,n[g++]=A,n[g++]=255}--h}}}function a(e,t,r,n){for(var i=e[t++],o=1<<i,a=o+1,s=a+1,u=i+1,l=(1<<u)-1,c=0,f=0,h=0,p=e[t++],d=new Int32Array(4096),g=null;;){for(;16>c&&0!==p;)f|=e[t++]<<c,c+=8,1===p?p=e[t++]:--p;if(u>c)break;var _=f&l;if(f>>=u,c-=u,_!==o){if(_===a)break;for(var m=s>_?_:g,v=0,y=m;y>o;)y=d[y]>>8,++v;var E=y,b=h+v+(m!==_?1:0);if(b>n)return void console.log("Warning, gif stream longer than expected.");r[h++]=E,h+=v;var w=h;for(m!==_&&(r[h++]=E),y=m;v--;)y=d[y],r[--w]=255&y,y>>=8;null!==g&&4096>s&&(d[s++]=g<<8|E,s>=l+1&&12>u&&(++u,l=l<<1|1)),g=_}else s=a+1,u=i+1,l=(1<<u)-1,g=null}return h!==n&&console.log("Warning, gif stream shorter than expected."),r}try{r.GifWriter=n,r.GifReader=o}catch(s){}},{}],53:[function(e,t,r){(function(n){function i(e,t,r){function i(){for(;l.length&&!f.paused;){var e=l.shift();if(null===e)return f.emit("end");f.emit("data",e)}}function a(){f.writable=!1,t.call(f),!f.readable&&f.autoDestroy&&f.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var s=!1,u=!1,l=[],c=!1,f=new o;return f.readable=f.writable=!0,f.paused=!1,f.autoDestroy=!(r&&r.autoDestroy===!1),f.write=function(t){return e.call(this,t),!f.paused},f.queue=f.push=function(e){return c?f:(null===e&&(c=!0),l.push(e),i(),f)},f.on("end",function(){f.readable=!1,!f.writable&&f.autoDestroy&&n.nextTick(function(){f.destroy()})}),f.end=function(e){return s?void 0:(s=!0,arguments.length&&f.write(e),a(),f)},f.destroy=function(){return u?void 0:(u=!0,s=!0,l.length=0,f.writable=f.readable=!1,f.emit("close"),f)},f.pause=function(){return f.paused?void 0:(f.paused=!0,f)},f.resume=function(){return f.paused&&(f.paused=!1,f.emit("resume")),i(),f.paused||f.emit("drain"),f},f}var o=e("stream");r=t.exports=i,i.through=i}).call(this,e("_process"))},{_process:14,stream:28}],54:[function(e,t,r){"use strict";function n(e,t,r,n,i){this.gl=e,this.type=t,this.handle=r,this.length=n,this.usage=i}function i(e,t,r,n,i,o){var a=i.length*i.BYTES_PER_ELEMENT;if(0>o)return e.bufferData(t,i,n),a;if(a+o>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,o,i),r}function o(e,t){for(var r=u.malloc(e.length,t),n=e.length,i=0;n>i;++i)r[i]=e[i];return r}function a(e,t){for(var r=1,n=t.length-1;n>=0;--n){if(t[n]!==r)return!1;r*=e[n]}return!0}function s(e,t,r,i){if(r=r||e.ARRAY_BUFFER,i=i||e.DYNAMIC_DRAW,r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==e.DYNAMIC_DRAW&&i!==e.STATIC_DRAW&&i!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var o=e.createBuffer(),a=new n(e,r,o,0,i);return a.update(t),a}var u=e("typedarray-pool"),l=e("ndarray-ops"),c=e("ndarray"),f=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],h=n.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)},h.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&"undefined"!=typeof e.shape){var r=e.dtype;if(f.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var n=gl.getExtension("OES_element_index_uint");r=n&&"uint16"!==r?"uint32":"uint16"}if(r===e.dtype&&a(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=i(this.gl,this.type,this.length,this.usage,e.data,t):this.length=i(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var s=u.malloc(e.size,r),h=c(s,e.shape);l.assign(h,e),0>t?this.length=i(this.gl,this.type,this.length,this.usage,s,t):this.length=i(this.gl,this.type,this.length,this.usage,s.subarray(0,e.size),t),u.free(s)}}else if(Array.isArray(e)){var p;p=this.type===this.gl.ELEMENT_ARRAY_BUFFER?o(e,"uint16"):o(e,"float32"),0>t?this.length=i(this.gl,this.type,this.length,this.usage,p,t):this.length=i(this.gl,this.type,this.length,this.usage,p.subarray(0,e.length),t),u.free(p)}else if("object"==typeof e&&"number"==typeof e.length)this.length=i(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");e=0|e,0>=e&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},t.exports=s},{ndarray:60,"ndarray-ops":55,"typedarray-pool":65}],55:[function(e,t,r){"use strict";function n(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var r=e.args[t];0===t?e.args[t]={name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function i(e){return a({args:e.args,pre:n(e.pre),body:n(e.body),post:n(e.proc),funcName:e.funcName})}function o(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);var n=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return n(i(e))}var a=e("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in u){var t=u[e];r[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),r[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var t=l[e];r[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),r[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var t=c[e];r[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<f.length;++e){var t=f[e];r[t]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),r[t+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];r[t]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),r[t+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),r[t+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var p=["atan2","pow"];!function(){for(var e=0;e<p.length;++e){var t=p[e];r[t+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),r[t+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),r[t+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),r[t+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),r.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":56}],56:[function(e,t,r){arguments[4][48][0].apply(r,arguments)},{"./lib/thunk.js":58,dup:48}],57:[function(e,t,r){arguments[4][49][0].apply(r,arguments)},{dup:49,uniq:59}],58:[function(e,t,r){arguments[4][50][0].apply(r,arguments)},{"./compile.js":57,dup:50}],59:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{dup:41}],60:[function(e,t,r){function n(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(n);var i=new Array(r.length);for(e=0;e<i.length;++e)i[e]=r[e][1];return i}function o(e,t){var r=["View",t,"d",e].join("");0>t&&(r="View_Nil"+e);var n="generic"===e;if(-1===t){var o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",a=new Function(o);return a()}if(0===t){var o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",a=new Function("TrivialArray",o);return a(f[e][0])}var o=["'use strict'"],s=u(t),l=s.map(function(e){return"i"+e}),c="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),h=s.map(function(e){return"b"+e}).join(","),p=s.map(function(e){return"c"+e}).join(",");o.push("function "+r+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),4>t?(o.push("function "+r+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+l.join(",")+",v){"),n?o.push("return this.data.set("+c+",v)}"):o.push("return this.data["+c+"]=v}"),o.push("proto.get=function "+r+"_get("+l.join(",")+"){"),n?o.push("return this.data.get("+c+")}"):o.push("return this.data["+c+"]}"),o.push("proto.index=function "+r+"_index(",l.join(),"){return "+c+"}"),o.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),g=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});o.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+g.join(","));for(var _=0;t>_;++_)o.push("if(typeof i"+_+"==='number'&&i"+_+">=0){d=i"+_+"|0;b+=c"+_+"*d;a"+_+"-=d}");o.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var _=0;t>_;++_)o.push("if(typeof i"+_+"==='number'){d=i"+_+"|0;if(d<0){c+=b"+_+"*(a"+_+"-1);a"+_+"=ceil(-a"+_+"/d)}else{a"+_+"=ceil(a"+_+"/d)}b"+_+"*=d}");o.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");for(var m=new Array(t),v=new Array(t),_=0;t>_;++_)m[_]="a[i"+_+"]",v[_]="b[i"+_+"]";o.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+m.join(",")+","+v.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var _=0;t>_;++_)o.push("if(typeof i"+_+"==='number'&&i"+_+">=0){c=(c+this.stride["+_+"]*i"+_+")|0}else{a.push(this.shape["+_+"]);b.push(this.stride["+_+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",o.join("\n"));return a(f[e],i)}function a(e){if(l(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function s(e,t,r,n){if(void 0===e){var i=f.array[0];return i([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===r){r=new Array(s);for(var u=s-1,l=1;u>=0;--u)r[u]=l,l*=t[u]}if(void 0===n){n=0;for(var u=0;s>u;++u)r[u]<0&&(n-=(t[u]-1)*r[u])}for(var c=a(e),h=f[c];h.length<=s+1;)h.push(o(c,h.length-1));var i=h[s+1];return i(e,t,r,n)}var u=e("iota-array"),l=e("is-buffer"),c="undefined"!=typeof Float64Array,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=s},{"iota-array":61,"is-buffer":62}],61:[function(e,t,r){arguments[4][40][0].apply(r,arguments)},{dup:40}],62:[function(e,t,r){arguments[4][11][0].apply(r,arguments)},{dup:11}],63:[function(e,t,r){"use strict";"use restrict";function n(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var i=32;r.INT_BITS=i,r.INT_MAX=2147483647,r.INT_MIN=-1<<i-1,r.sign=function(e){return(e>0)-(0>e)},r.abs=function(e){var t=e>>i-1;return(e^t)-t},r.min=function(e,t){return t^(e^t)&-(t>e)},r.max=function(e,t){return e^(e^t)&-(t>e)},r.isPow2=function(e){return!(e&e-1||!e)},r.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1},r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},r.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},r.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},r.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var o=new Array(256);!function(e){for(var t=0;256>t;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(o),r.reverse=function(e){return o[255&e]<<24|o[e>>>8&255]<<16|o[e>>>16&255]<<8|o[e>>>24&255]},r.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},r.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},r.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},r.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],64:[function(e,t,r){"use strict";function n(e,t,r){var i=0|e[r];if(0>=i)return[];var o,a=new Array(i);if(r===e.length-1)for(o=0;i>o;++o)a[o]=t;else for(o=0;i>o;++o)a[o]=n(e,t,r+1);return a}function i(e,t){var r,n;for(r=new Array(e),n=0;e>n;++n)r[n]=t;return r}function o(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return i(0|e,t);break;case"object":if("number"==typeof e.length)return n(e,t,0)}return[]}t.exports=o},{}],65:[function(e,t,r){(function(t,n){"use strict";function i(e){if(e){var t=e.length||e.byteLength,r=v.log2(t);w[r].push(e)}}function o(e){i(e.buffer)}function a(e){var e=v.nextPow2(e),t=v.log2(e),r=w[t];return r.length>0?r.pop():new ArrayBuffer(e)}function s(e){return new Uint8Array(a(e),0,e)}function u(e){return new Uint16Array(a(2*e),0,e)}function l(e){return new Uint32Array(a(4*e),0,e)}function c(e){return new Int8Array(a(e),0,e)}function f(e){return new Int16Array(a(2*e),0,e)}function h(e){return new Int32Array(a(4*e),0,e)}function p(e){return new Float32Array(a(4*e),0,e)}function d(e){return new Float64Array(a(8*e),0,e)}function g(e){return E?new Uint8ClampedArray(a(e),0,e):s(e)}function _(e){return new DataView(a(e),0,e)}function m(e){e=v.nextPow2(e);var t=v.log2(e),r=A[t];return r.length>0?r.pop():new n(e)}var v=e("bit-twiddle"),y=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:y([32,0]),UINT16:y([32,0]),UINT32:y([32,0]),INT8:y([32,0]),INT16:y([32,0]),INT32:y([32,0]),FLOAT:y([32,0]),DOUBLE:y([32,0]),DATA:y([32,0]),UINT8C:y([32,0]),BUFFER:y([32,0])});var E="undefined"!=typeof Uint8ClampedArray,b=t.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=y([32,0])),b.BUFFER||(b.BUFFER=y([32,0]));var w=b.DATA,A=b.BUFFER;r.free=function(e){if(n.isBuffer(e))A[v.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|v.log2(t);w[r].push(e)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=o,r.freeArrayBuffer=i,r.freeBuffer=function(e){A[v.log2(e.length)].push(e)},r.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return a(e);switch(t){case"uint8":return s(e);case"uint16":return u(e);case"uint32":return l(e);case"int8":return c(e);case"int16":return f(e);case"int32":return h(e);case"float":case"float32":return p(e);case"double":case"float64":return d(e);case"uint8_clamped":return g(e);case"buffer":return m(e);case"data":case"dataview":return _(e);default:return null}return null},r.mallocArrayBuffer=a,r.mallocUint8=s,r.mallocUint16=u,r.mallocUint32=l,r.mallocInt8=c,r.mallocInt16=f,r.mallocInt32=h,r.mallocFloat32=r.mallocFloat=p,r.mallocFloat64=r.mallocDouble=d,r.mallocUint8Clamped=g,r.mallocDataView=_,r.mallocBuffer=m,r.clearCache=function(){for(var e=0;32>e;++e)b.UINT8[e].length=0,b.UINT16[e].length=0,b.UINT32[e].length=0,b.INT8[e].length=0,b.INT16[e].length=0,b.INT32[e].length=0,b.FLOAT[e].length=0,b.DOUBLE[e].length=0,b.UINT8C[e].length=0,w[e].length=0,A[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":63,buffer:5,dup:64}],66:[function(e,t,r){function n(e,t){return e===!1?!1:"undefined"==typeof e?t:e+0}function i(e,t){return e===!1?!1:Array.isArray(e)?e||t:t}r.color=function(e){return i(e,[0,0,0,1])},r.depth=function(e){return n(e,1)},r.stencil=function(e){return n(e,!1)}},{}],67:[function(e,t,r){function n(e){function t(e){var t=0;return r!==!1&&(e.clearColor(r[0],r[1],r[2],r[3]),t|=e.COLOR_BUFFER_BIT),n!==!1&&(e.clearDepth(n),t|=e.DEPTH_BUFFER_BIT),o!==!1&&(e.clearStencil(o),t|=e.STENCIL_BUFFER_BIT),e.clear(t),e}e=e||{};var r=i.color(e.color);Object.defineProperty(t,"color",{get:function(){return r},set:function(e){return r=i.color(e)}});var n=i.depth(e.depth);Object.defineProperty(t,"depth",{get:function(){return n},set:function(e){return n=i.depth(e)}});var o=i.stencil(e.stencil);return Object.defineProperty(t,"stencil",{get:function(){return o},set:function(e){return o=i.stencil(e)}}),t}var i=e("./defaults");t.exports=n},{"./defaults":66}],68:[function(e,t,r){function n(e,t,r){function n(){r(o),i(n)}"function"==typeof t?(r=t,t={}):t=t||{};var o=e.getContext("webgl",t)||e.getContext("webgl-experimental",t)||e.getContext("experimental-webgl",t);if(!o)throw new Error("Unable to initialize WebGL");return r&&i(n),o}var i=e("raf-component");t.exports=n},{"raf-component":69}],69:[function(e,t,r){function n(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),n=setTimeout(e,r);return i=t,n}r=t.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||n;var i=(new Date).getTime(),o=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;r.cancel=function(e){o.call(window,e)}},{}],70:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],_=t[14],m=t[15];return e[0]=s*(h*m-p*_)-f*(u*m-l*_)+g*(u*p-l*h),e[1]=-(n*(h*m-p*_)-f*(i*m-o*_)+g*(i*p-o*h)),e[2]=n*(u*m-l*_)-s*(i*m-o*_)+g*(i*l-o*u),e[3]=-(n*(u*p-l*h)-s*(i*p-o*h)+f*(i*l-o*u)),e[4]=-(a*(h*m-p*_)-c*(u*m-l*_)+d*(u*p-l*h)),e[5]=r*(h*m-p*_)-c*(i*m-o*_)+d*(i*p-o*h),e[6]=-(r*(u*m-l*_)-a*(i*m-o*_)+d*(i*l-o*u)),e[7]=r*(u*p-l*h)-a*(i*p-o*h)+c*(i*l-o*u),e[8]=a*(f*m-p*g)-c*(s*m-l*g)+d*(s*p-l*f),e[9]=-(r*(f*m-p*g)-c*(n*m-o*g)+d*(n*p-o*f)),e[10]=r*(s*m-l*g)-a*(n*m-o*g)+d*(n*l-o*s),e[11]=-(r*(s*p-l*f)-a*(n*p-o*f)+c*(n*l-o*s)),e[12]=-(a*(f*_-h*g)-c*(s*_-u*g)+d*(s*h-u*f)),e[13]=r*(f*_-h*g)-c*(n*_-i*g)+d*(n*h-i*f),e[14]=-(r*(s*_-u*g)-a*(n*_-i*g)+d*(n*u-i*s)),e[15]=r*(s*h-u*f)-a*(n*h-i*f)+c*(n*u-i*s),e}t.exports=n},{}],71:[function(e,t,r){function n(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=n},{}],72:[function(e,t,r){function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=n},{}],73:[function(e,t,r){function n(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],74:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11],p=e[12],d=e[13],g=e[14],_=e[15],m=t*a-r*o,v=t*s-n*o,y=t*u-i*o,E=r*s-n*a,b=r*u-i*a,w=n*u-i*s,A=l*d-c*p,T=l*g-f*p,R=l*_-h*p,x=c*g-f*d,S=c*_-h*d,I=f*_-h*g;return m*I-v*S+y*x+E*R-b*T+w*A}t.exports=n},{}],75:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,l=r*a,c=n*a,f=n*s,h=i*a,p=i*s,d=i*u,g=o*a,_=o*s,m=o*u;return e[0]=1-f-d,e[1]=c+m,e[2]=h-_,e[3]=0,e[4]=c-m,e[5]=1-l-d,e[6]=p+g,e[7]=0,e[8]=h+_,e[9]=p-g,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],76:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,u=i+i,l=o+o,c=n*s,f=n*u,h=n*l,p=i*u,d=i*l,g=o*l,_=a*s,m=a*u,v=a*l;
return e[0]=1-(p+g),e[1]=f+v,e[2]=h-m,e[3]=0,e[4]=f-v,e[5]=1-(c+g),e[6]=d+_,e[7]=0,e[8]=h+m,e[9]=d-_,e[10]=1-(c+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}t.exports=n},{}],77:[function(e,t,r){function n(e,t,r,n,i,o,a){var s=1/(r-t),u=1/(i-n),l=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e}t.exports=n},{}],78:[function(e,t,r){function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],79:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotationTranslation:e("./fromRotationTranslation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":70,"./clone":71,"./copy":72,"./create":73,"./determinant":74,"./fromQuat":75,"./fromRotationTranslation":76,"./frustum":77,"./identity":78,"./invert":80,"./lookAt":81,"./multiply":82,"./ortho":83,"./perspective":84,"./perspectiveFromFieldOfView":85,"./rotate":86,"./rotateX":87,"./rotateY":88,"./rotateZ":89,"./scale":90,"./str":91,"./translate":92,"./transpose":93}],80:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],_=t[14],m=t[15],v=r*s-n*a,y=r*u-i*a,E=r*l-o*a,b=n*u-i*s,w=n*l-o*s,A=i*l-o*u,T=c*g-f*d,R=c*_-h*d,x=c*m-p*d,S=f*_-h*g,I=f*m-p*g,L=h*m-p*_,M=v*L-y*I+E*S+b*x-w*R+A*T;return M?(M=1/M,e[0]=(s*L-u*I+l*S)*M,e[1]=(i*I-n*L-o*S)*M,e[2]=(g*A-_*w+m*b)*M,e[3]=(h*w-f*A-p*b)*M,e[4]=(u*x-a*L-l*R)*M,e[5]=(r*L-i*x+o*R)*M,e[6]=(_*E-d*A-m*y)*M,e[7]=(c*A-h*E+p*y)*M,e[8]=(a*I-s*x+l*T)*M,e[9]=(n*x-r*I-o*T)*M,e[10]=(d*w-g*E+m*v)*M,e[11]=(f*E-c*w-p*v)*M,e[12]=(s*R-a*S-u*T)*M,e[13]=(r*S-n*R+i*T)*M,e[14]=(g*y-d*b-_*v)*M,e[15]=(c*b-f*y+h*v)*M,e):null}t.exports=n},{}],81:[function(e,t,r){function n(e,t,r,n){var o,a,s,u,l,c,f,h,p,d,g=t[0],_=t[1],m=t[2],v=n[0],y=n[1],E=n[2],b=r[0],w=r[1],A=r[2];return Math.abs(g-b)<1e-6&&Math.abs(_-w)<1e-6&&Math.abs(m-A)<1e-6?i(e):(f=g-b,h=_-w,p=m-A,d=1/Math.sqrt(f*f+h*h+p*p),f*=d,h*=d,p*=d,o=y*p-E*h,a=E*f-v*p,s=v*h-y*f,d=Math.sqrt(o*o+a*a+s*s),d?(d=1/d,o*=d,a*=d,s*=d):(o=0,a=0,s=0),u=h*s-p*a,l=p*o-f*s,c=f*a-h*o,d=Math.sqrt(u*u+l*l+c*c),d?(d=1/d,u*=d,l*=d,c*=d):(u=0,l=0,c=0),e[0]=o,e[1]=u,e[2]=f,e[3]=0,e[4]=a,e[5]=l,e[6]=h,e[7]=0,e[8]=s,e[9]=c,e[10]=p,e[11]=0,e[12]=-(o*g+a*_+s*m),e[13]=-(u*g+l*_+c*m),e[14]=-(f*g+h*_+p*m),e[15]=1,e)}var i=e("./identity");t.exports=n},{"./identity":78}],82:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],g=t[12],_=t[13],m=t[14],v=t[15],y=r[0],E=r[1],b=r[2],w=r[3];return e[0]=y*n+E*s+b*f+w*g,e[1]=y*i+E*u+b*h+w*_,e[2]=y*o+E*l+b*p+w*m,e[3]=y*a+E*c+b*d+w*v,y=r[4],E=r[5],b=r[6],w=r[7],e[4]=y*n+E*s+b*f+w*g,e[5]=y*i+E*u+b*h+w*_,e[6]=y*o+E*l+b*p+w*m,e[7]=y*a+E*c+b*d+w*v,y=r[8],E=r[9],b=r[10],w=r[11],e[8]=y*n+E*s+b*f+w*g,e[9]=y*i+E*u+b*h+w*_,e[10]=y*o+E*l+b*p+w*m,e[11]=y*a+E*c+b*d+w*v,y=r[12],E=r[13],b=r[14],w=r[15],e[12]=y*n+E*s+b*f+w*g,e[13]=y*i+E*u+b*h+w*_,e[14]=y*o+E*l+b*p+w*m,e[15]=y*a+E*c+b*d+w*v,e}t.exports=n},{}],83:[function(e,t,r){function n(e,t,r,n,i,o,a){var s=1/(t-r),u=1/(n-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(a+o)*l,e[15]=1,e}t.exports=n},{}],84:[function(e,t,r){function n(e,t,r,n,i){var o=1/Math.tan(t/2),a=1/(n-i);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*a,e[15]=0,e}t.exports=n},{}],85:[function(e,t,r){function n(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-((a-s)*u*.5),e[9]=(i-o)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}t.exports=n},{}],86:[function(e,t,r){function n(e,t,r,n){var i,o,a,s,u,l,c,f,h,p,d,g,_,m,v,y,E,b,w,A,T,R,x,S,I=n[0],L=n[1],M=n[2],N=Math.sqrt(I*I+L*L+M*M);return Math.abs(N)<1e-6?null:(N=1/N,I*=N,L*=N,M*=N,i=Math.sin(r),o=Math.cos(r),a=1-o,s=t[0],u=t[1],l=t[2],c=t[3],f=t[4],h=t[5],p=t[6],d=t[7],g=t[8],_=t[9],m=t[10],v=t[11],y=I*I*a+o,E=L*I*a+M*i,b=M*I*a-L*i,w=I*L*a-M*i,A=L*L*a+o,T=M*L*a+I*i,R=I*M*a+L*i,x=L*M*a-I*i,S=M*M*a+o,e[0]=s*y+f*E+g*b,e[1]=u*y+h*E+_*b,e[2]=l*y+p*E+m*b,e[3]=c*y+d*E+v*b,e[4]=s*w+f*A+g*T,e[5]=u*w+h*A+_*T,e[6]=l*w+p*A+m*T,e[7]=c*w+d*A+v*T,e[8]=s*R+f*x+g*S,e[9]=u*R+h*x+_*S,e[10]=l*R+p*x+m*S,e[11]=c*R+d*x+v*S,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}t.exports=n},{}],87:[function(e,t,r){function n(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=u*i+h*n,e[8]=l*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-u*n,e}t.exports=n},{}],88:[function(e,t,r){function n(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*n,e[1]=a*i-c*n,e[2]=s*i-f*n,e[3]=u*i-h*n,e[8]=o*n+l*i,e[9]=a*n+c*i,e[10]=s*n+f*i,e[11]=u*n+h*i,e}t.exports=n},{}],89:[function(e,t,r){function n(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=u*i+h*n,e[4]=l*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-u*n,e}t.exports=n},{}],90:[function(e,t,r){function n(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=n},{}],91:[function(e,t,r){function n(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}t.exports=n},{}],92:[function(e,t,r){function n(e,t,r){var n,i,o,a,s,u,l,c,f,h,p,d,g=r[0],_=r[1],m=r[2];return t===e?(e[12]=t[0]*g+t[4]*_+t[8]*m+t[12],e[13]=t[1]*g+t[5]*_+t[9]*m+t[13],e[14]=t[2]*g+t[6]*_+t[10]*m+t[14],e[15]=t[3]*g+t[7]*_+t[11]*m+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=n*g+s*_+f*m+t[12],e[13]=i*g+u*_+h*m+t[13],e[14]=o*g+l*_+p*m+t[14],e[15]=a*g+c*_+d*m+t[15]),e}t.exports=n},{}],93:[function(e,t,r){function n(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=n},{}],94:[function(e,t,r){"use strict";function n(e){this.gl=e,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function i(e,t){return e.name<t.name?-1:1}function o(e,t,r,i,o){var a=new n(e);return a.update(t,r,i,o),a}var a=e("./lib/create-uniforms"),s=e("./lib/create-attributes"),u=e("./lib/reflect"),l=e("./lib/shader-cache"),c=e("./lib/runtime-reflect"),f=e("./lib/GLError"),h=n.prototype;h.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},h.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(e,t,r,n){function o(){p.program=l.program(d,p._vref,p._fref,E,b);for(var e=0;e<r.length;++e)I[e]=d.getUniformLocation(p.program,r[e].name)}if(!t||1===arguments.length){var h=e;e=h.vertex,t=h.fragment,r=h.uniforms,n=h.attributes}var p=this,d=p.gl,g=p._vref;p._vref=l.shader(d,d.VERTEX_SHADER,e),g&&g.dispose(),p.vertShader=p._vref.shader;var _=this._fref;if(p._fref=l.shader(d,d.FRAGMENT_SHADER,t),_&&_.dispose(),p.fragShader=p._fref.shader,!r||!n){var m=d.createProgram();if(d.attachShader(m,p.fragShader),d.attachShader(m,p.vertShader),d.linkProgram(m),!d.getProgramParameter(m,d.LINK_STATUS)){var v=d.getProgramInfoLog(m);throw new f(v,"Error linking program:"+v)}r=r||c.uniforms(d,m),n=n||c.attributes(d,m),d.deleteProgram(m)}n=n.slice(),n.sort(i);for(var y=[],E=[],b=[],w=0;w<n.length;++w){var A=n[w];if(A.type.indexOf("mat")>=0){for(var T=0|A.type.charAt(A.type.length-1),R=new Array(T),x=0;T>x;++x)R[x]=b.length,E.push(A.name+"["+x+"]"),"number"==typeof A.location?b.push(A.location+x):Array.isArray(A.location)&&A.location.length===T&&"number"==typeof A.location[x]?b.push(0|A.location[x]):b.push(-1);y.push({name:A.name,type:A.type,locations:R})}else y.push({name:A.name,type:A.type,locations:[b.length]}),E.push(A.name),"number"==typeof A.location?b.push(0|A.location):b.push(-1)}for(var S=0,w=0;w<b.length;++w)if(b[w]<0){for(;b.indexOf(S)>=0;)S+=1;b[w]=S}var I=new Array(r.length);o(),p._relink=o,p.types={uniforms:u(r),attributes:u(n)},p.attributes=s(d,p,y,b),Object.defineProperty(p,"uniforms",a(d,p,r,I))},t.exports=o},{"./lib/GLError":95,"./lib/create-attributes":96,"./lib/create-uniforms":97,"./lib/reflect":98,"./lib/runtime-reflect":99,"./lib/shader-cache":100}],95:[function(e,t,r){function n(e,t,r){this.shortMessage=t||"",this.longMessage=r||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(r?"\n"+r:""),this.stack=(new Error).stack}n.prototype=new Error,n.prototype.name="GLError",n.prototype.constructor=n,t.exports=n},{}],96:[function(e,t,r){"use strict";function n(e,t,r,n,i,o){this._gl=e,this._wrapper=t,this._index=r,this._locations=n,this._dimension=i,this._constFunc=o}function i(e,t,r,i,o,a,s){for(var u=["gl","v"],l=[],c=0;o>c;++c)u.push("x"+c),l.push("x"+c);u.push("if(x0.length===void 0){return gl.vertexAttrib"+o+"f(v,"+l.join()+")}else{return gl.vertexAttrib"+o+"fv(v,x0)}");var f=Function.apply(null,u),h=new n(e,t,r,i,o,f);Object.defineProperty(a,s,{set:function(t){return e.disableVertexAttribArray(i[r]),f(e,i[r],t),t},get:function(){return h},enumerable:!0})}function o(e,t,r,n,o,a,s){for(var u=new Array(o),l=new Array(o),c=0;o>c;++c)i(e,t,r[c],n,o,u,c),l[c]=u[c];Object.defineProperty(u,"location",{set:function(e){if(Array.isArray(e))for(var t=0;o>t;++t)l[t].location=e[t];else for(var t=0;o>t;++t)l[t].location=e+t;return e},get:function(){for(var e=new Array(o),t=0;o>t;++t)e[t]=n[r[t]];return e},enumerable:!0}),u.pointer=function(t,i,a,s){t=t||e.FLOAT,i=!!i,a=a||o*o,s=s||0;for(var u=0;o>u;++u){var l=n[r[u]];e.vertexAttribPointer(l,o,t,i,a,s+u*o),e.enableVertexAttribArray(l)}};var f=new Array(o),h=e["vertexAttrib"+o+"fv"];Object.defineProperty(a,s,{set:function(t){for(var i=0;o>i;++i){var a=n[r[i]];if(e.disableVertexAttribArray(a),Array.isArray(t[0]))h.call(e,a,t[i]);else{for(var s=0;o>s;++s)f[s]=t[o*i+s];h.call(e,a,f)}}return t},get:function(){return u},enumerable:!0})}function a(e,t,r,n){for(var a={},u=0,l=r.length;l>u;++u){var c=r[u],f=c.name,h=c.type,p=c.locations;switch(h){case"bool":case"int":case"float":i(e,t,p[0],n,1,a,f);break;default:if(h.indexOf("vec")>=0){var d=h.charCodeAt(h.length-1)-48;if(2>d||d>4)throw new s("","Invalid data type for attribute "+f+": "+h);i(e,t,p[0],n,d,a,f)}else{if(!(h.indexOf("mat")>=0))throw new s("","Unknown data type for attribute "+f+": "+h);var d=h.charCodeAt(h.length-1)-48;if(2>d||d>4)throw new s("","Invalid data type for attribute "+f+": "+h);o(e,t,p,n,d,a,f)}}}return a}t.exports=a;var s=e("./GLError"),u=n.prototype;u.pointer=function(e,t,r,n){var i=this,o=i._gl,a=i._locations[i._index];o.vertexAttribPointer(a,i._dimension,e||o.FLOAT,!!t,r||0,n||0),o.enableVertexAttribArray(a)},u.set=function(e,t,r,n){return this._constFunc(this._locations[this._index],e,t,r,n)},Object.defineProperty(u,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}})},{"./GLError":95}],97:[function(e,t,r){"use strict";function n(e){var t=new Function("y","return function(){return y}");return t(e)}function i(e,t){for(var r=new Array(e),n=0;e>n;++n)r[n]=t;return r}function o(e,t,r,o){function u(r){var n=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+r+"])}");return n(e,t,o)}function l(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(!(n>=0&&1>=n&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var i=r.charCodeAt(r.length-1)-48;if(2>i||i>4)throw new s("","Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}throw new s("","Unknown uniform data type for "+name+": "+r)}var i=r.charCodeAt(r.length-1)-48;if(2>i||i>4)throw new s("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new s("","Unrecognized data type for vector "+name+": "+r)}}}function c(e,t){if("object"!=typeof t)return[[e,t]];var r=[];for(var n in t){var i=t[n],o=e;o+=parseInt(n)+""===n?"["+n+"]":"."+n,"object"==typeof i?r.push.apply(r,c(o,i)):r.push([o,i])}return r}function f(t){for(var n=["return function updateProperty(obj){"],i=c("",t),a=0;a<i.length;++a){var s=i[a],u=s[0],f=s[1];o[f]&&n.push(l(u,f,r[f].type))}n.push("return obj}");var h=new Function("gl","locations",n.join("\n"));return h(e,o)}function h(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(t>=0&&1>=t&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(2>r||r>4)throw new s("","Invalid data type");return"b"===e.charAt(0)?i(r,!1):i(r,0)}if(0===e.indexOf("mat")&&4===e.length){var r=e.charCodeAt(e.length-1)-48;if(2>r||r>4)throw new s("","Invalid uniform dimension type for matrix "+name+": "+e);return i(r*r,0)}throw new s("","Unknown uniform data type for "+name+": "+e)}}function p(e,t,i){if("object"==typeof i){var a=d(i);Object.defineProperty(e,t,{get:n(a),set:f(i),enumerable:!0,configurable:!1})}else o[i]?Object.defineProperty(e,t,{get:u(i),set:f(i),enumerable:!0,configurable:!1}):e[t]=h(r[i].type)}function d(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r)p(t,r,e[r])}else{t={};for(var n in e)p(t,n,e[n])}return t}var g=a(r,!0);return{get:n(d(g)),set:f(g),enumerable:!0,configurable:!0}}var a=e("./reflect"),s=e("./GLError");t.exports=o},{"./GLError":95,"./reflect":98}],98:[function(e,t,r){"use strict";function n(e,t){for(var r={},n=0;n<e.length;++n)for(var i=e[n].name,o=i.split("."),a=r,s=0;s<o.length;++s){var u=o[s].split("[");if(u.length>1){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var l=1;l<u.length;++l){var c=parseInt(u[l]);l<u.length-1||s<o.length-1?(c in a||(l<u.length-1?a[c]=[]:a[c]={}),a=a[c]):t?a[c]=n:a[c]=e[n].type}}else s<o.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):t?a[u[0]]=n:a[u[0]]=e[n].type}return r}t.exports=n},{}],99:[function(e,t,r){"use strict";function n(e,t){if(!s){var r=Object.keys(a);s={};for(var n=0;n<r.length;++n){var i=r[n];s[e[i]]=a[i]}}return s[t]}function i(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=[],o=0;r>o;++o){var a=e.getActiveUniform(t,o);if(a){var s=n(e,a.type);if(a.size>1)for(var u=0;u<a.size;++u)i.push({name:a.name.replace("[0]","["+u+"]"),type:s});else i.push({name:a.name,type:s})}}return i}function o(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=[],o=0;r>o;++o){var a=e.getActiveAttrib(t,o);a&&i.push({name:a.name,type:n(e,a.type)})}return i}r.uniforms=i,r.attributes=o;var a={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},s=null},{}],100:[function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){this.id=e,this.src=t,this.type=r,this.shader=n,this.count=o,this.programs=[],this.cache=a}function i(e){this.gl=e,this.shaders=[{},{}],this.programs={}}function o(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(n);try{var o=f(i,r,t)}catch(a){throw console.warn("Failed to format compiler error: "+a),new c(i,"Error compiling shader:\n"+i)}throw new c(i,o["short"],o["long"])}return n}function a(e,t,r,n,i){var o=e.createProgram();e.attachShader(o,t),e.attachShader(o,r);for(var a=0;a<n.length;++a)e.bindAttribLocation(o,i[a],n[a]);if(e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){var s=e.getProgramInfoLog(o);throw new c(s,"Error linking program: "+s)}return o}function s(e){var t=p.get(e);return t||(t=new i(e),p.set(e,t)),t}function u(e,t,r){return s(e).getShaderReference(t,r)}function l(e,t,r,n,i){return s(e).getProgram(t,r,n,i)}r.shader=u,r.program=l;var c=e("./GLError"),f=e("gl-format-compiler-error"),h="undefined"==typeof WeakMap?e("weakmap-shim"):WeakMap,p=new h,d=0;n.prototype.dispose=function(){if(0===--this.count){for(var e=this.cache,t=e.gl,r=this.programs,n=0,i=r.length;i>n;++n){var o=e.programs[r[n]];o&&(delete e.programs[n],t.deleteProgram(o))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var g=i.prototype;g.getShaderReference=function(e,t){var r=this.gl,i=this.shaders[e===r.FRAGMENT_SHADER|0],a=i[t];if(a&&r.isShader(a.shader))a.count+=1;else{var s=o(r,e,t);a=i[t]=new n(d++,t,e,s,[],1,this)}return a},g.getProgram=function(e,t,r,n){var i=[e.id,t.id,r.join(":"),n.join(":")].join("@"),o=this.programs[i];return o&&this.gl.isProgram(o)||(this.programs[i]=o=a(this.gl,e.shader,t.shader,r,n),e.programs.push(i),t.programs.push(i)),o}},{"./GLError":95,"gl-format-compiler-error":101,"weakmap-shim":117}],101:[function(e,t,r){function n(e,t,r){"use strict";var n=a(t)||"of unknown name (see npm glsl-shader-name)",u="unknown type";void 0!==r&&(u=r===o.FRAGMENT_SHADER?"fragment":"vertex");for(var l=i("Error compiling %s shader %s:\n",u,n),c=i("%s%s",l,e),f=e.split("\n"),h={},p=0;p<f.length;p++){var d=f[p];if(""!==d){var g=parseInt(d.split(":")[2]);if(isNaN(g))throw new Error(i("Could not parse error: %s",d));h[g]=d}}for(var _=s(t).split("\n"),p=0;p<_.length;p++)if(h[p+3]||h[p+2]||h[p+1]){var m=_[p];if(l+=m+"\n",h[p+1]){var v=h[p+1];v=v.substr(v.split(":",3).join(":").length+1).trim(),l+=i("^^^ %s\n\n",v)}}return{"long":l.trim(),"short":c.trim()}}var i=e("sprintf-js").sprintf,o=e("gl-constants/lookup"),a=e("glsl-shader-name"),s=e("add-line-numbers");t.exports=n},{"add-line-numbers":102,"gl-constants/lookup":106,"glsl-shader-name":107,"sprintf-js":114}],102:[function(e,t,r){function n(e,t,r){t="number"==typeof t?t:1,r=r||": ";var n=e.split(/\r?\n/),o=String(n.length+t-1).length;return n.map(function(e,n){var a=n+t,s=String(a).length,u=i(a,o-s);return u+r+e}).join("\n")}var i=e("pad-left");t.exports=n},{"pad-left":103}],103:[function(e,t,r){"use strict";var n=e("repeat-string");t.exports=function(e,t,r){return r="undefined"!=typeof r?r+"":" ",n(r,t)+e}},{"repeat-string":104}],104:[function(e,t,r){"use strict";function n(e,t){if("string"!=typeof e)throw new TypeError("repeat-string expects a string.");if(1===t)return e;if(2===t)return e+e;var r=e.length*t;for((i!==e||"undefined"==typeof i)&&(i=e,o="");r>o.length&&t>0&&(1&t&&(o+=e),t>>=1);)e+=e;return o.substr(0,r)}t.exports=n;var i,o=""},{}],105:[function(e,t,r){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],106:[function(e,t,r){var n=e("./1.0/numbers");t.exports=function(e){return n[e]}},{"./1.0/numbers":105}],107:[function(e,t,r){function n(e){for(var t=Array.isArray(e)?e:i(e),r=0;r<t.length;r++){var n=t[r];if("preprocessor"===n.type){var a=n.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(a&&a[2]){var s=a[1],u=a[2];return(s?o(u):u).trim()}}}}var i=e("glsl-tokenizer"),o=e("atob-lite");t.exports=n},{"atob-lite":108,"glsl-tokenizer":113}],108:[function(e,t,r){t.exports=function(e){return atob(e)}},{}],109:[function(e,t,r){function n(){function e(e){e.length&&D.push({type:b[O],data:e,position:X,line:B,column:V})}function t(e){C=0,z+=e,U=z.length;for(var t;P=z[C],U>C;){switch(t=C,O){case l:C=R();break;case c:C=T();break;case f:C=A();break;case h:C=x();break;case p:C=L();break;case E:C=I();break;case d:C=M();break;case u:C=N();break;case v:C=w();break;case s:C=n()}if(t!==C)switch(z[t]){case"\n":V=0,++B;break;default:++V}}return j+=C,z=z.slice(C),D}function r(t){return F.length&&e(F.join("")),O=y,e("(eof)"),D}function n(){return F=F.length?[]:F,"/"===k&&"*"===P?(X=j+C-1,O=l,k=P,C+1):"/"===k&&"/"===P?(X=j+C-1,O=c,k=P,C+1):"#"===P?(O=f,X=j+C,C):/\s/.test(P)?(O=v,X=j+C,C):(G=/\d/.test(P),Y=/[^\w_]/.test(P),X=j+C,O=G?p:Y?h:u,C)}function w(){return/[^\s]/g.test(P)?(e(F.join("")),O=s,C):(F.push(P),k=P,C+1)}function A(){return"\n"===P&&"\\"!==k?(e(F.join("")),O=s,C):(F.push(P),k=P,C+1)}function T(){return A()}function R(){return"/"===P&&"*"===k?(F.push(P),e(F.join("")),O=s,C+1):(F.push(P),k=P,C+1)}function x(){if("."===k&&/\d/.test(P))return O=d,C;if("/"===k&&"*"===P)return O=l,C;if("/"===k&&"/"===P)return O=c,C;if("."===P&&F.length){for(;S(F););return O=d,C}if(";"===P||")"===P||"("===P){if(F.length)for(;S(F););return e(P),O=s,C+1}var t=2===F.length&&"="!==P;if(/[\w_\d\s]/.test(P)||t){for(;S(F););return O=s,C}return F.push(P),k=P,C+1}function S(t){for(var r,n,i=0;;){if(r=o.indexOf(t.slice(0,t.length+i).join("")),n=o[r],-1===r){if(i--+t.length>0)continue;n=t.slice(0,1).join("")}return e(n),X+=n.length,F=F.slice(n.length),F.length}}function I(){return/[^a-fA-F0-9]/.test(P)?(e(F.join("")),O=s,C):(F.push(P),k=P,C+1)}function L(){return"."===P?(F.push(P),O=d,k=P,C+1):/[eE]/.test(P)?(F.push(P),O=d,k=P,C+1):"x"===P&&1===F.length&&"0"===F[0]?(O=E,F.push(P),k=P,C+1):/[^\d]/.test(P)?(e(F.join("")),O=s,C):(F.push(P),k=P,C+1)}function M(){return"f"===P&&(F.push(P),k=P,C+=1),/[eE]/.test(P)?(F.push(P),k=P,C+1):/[^\d]/.test(P)?(e(F.join("")),O=s,C):(F.push(P),k=P,C+1)}function N(){if(/[^\d\w_]/.test(P)){var t=F.join("");return O=i.indexOf(t)>-1?m:a.indexOf(t)>-1?_:g,e(F.join("")),O=s,C}return F.push(P),k=P,C+1}var P,k,U,C=0,j=0,O=s,F=[],D=[],B=1,V=0,X=0,G=!1,Y=!1,z="";return function(e){return D=[],null!==e?t(e):r()}}t.exports=n;var i=e("./lib/literals"),o=e("./lib/operators"),a=e("./lib/builtins"),s=999,u=9999,l=0,c=1,f=2,h=3,p=4,d=5,g=6,_=7,m=8,v=9,y=10,E=11,b=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":110,"./lib/literals":111,"./lib/operators":112}],110:[function(e,t,r){t.exports=["gl_Position","gl_PointSize","gl_ClipVertex","gl_FragCoord","gl_FrontFacing","gl_FragColor","gl_FragData","gl_FragDepth","gl_Color","gl_SecondaryColor","gl_Normal","gl_Vertex","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_FogCoord","gl_MaxLights","gl_MaxClipPlanes","gl_MaxTextureUnits","gl_MaxTextureCoords","gl_MaxVertexAttribs","gl_MaxVertexUniformComponents","gl_MaxVaryingFloats","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformComponents","gl_MaxDrawBuffers","gl_ModelViewMatrix","gl_ProjectionMatrix","gl_ModelViewProjectionMatrix","gl_TextureMatrix","gl_NormalMatrix","gl_ModelViewMatrixInverse","gl_ProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverse","gl_TextureMatrixInverse","gl_ModelViewMatrixTranspose","gl_ProjectionMatrixTranspose","gl_ModelViewProjectionMatrixTranspose","gl_TextureMatrixTranspose","gl_ModelViewMatrixInverseTranspose","gl_ProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixInverseTranspose","gl_TextureMatrixInverseTranspose","gl_NormalScale","gl_DepthRangeParameters","gl_DepthRange","gl_ClipPlane","gl_PointParameters","gl_Point","gl_MaterialParameters","gl_FrontMaterial","gl_BackMaterial","gl_LightSourceParameters","gl_LightSource","gl_LightModelParameters","gl_LightModel","gl_LightModelProducts","gl_FrontLightModelProduct","gl_BackLightModelProduct","gl_LightProducts","gl_FrontLightProduct","gl_BackLightProduct","gl_FogParameters","gl_Fog","gl_TextureEnvColor","gl_EyePlaneS","gl_EyePlaneT","gl_EyePlaneR","gl_EyePlaneQ","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_ObjectPlaneR","gl_ObjectPlaneQ","gl_FrontColor","gl_BackColor","gl_FrontSecondaryColor","gl_BackSecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_Color","gl_SecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_PointCoord","radians","degrees","sin","cos","tan","asin","acos","atan","pow","exp","log","exp2","log2","sqrt","inversesqrt","abs","sign","floor","ceil","fract","mod","min","max","clamp","mix","step","smoothstep","length","distance","dot","cross","normalize","faceforward","reflect","refract","matrixCompMult","lessThan","lessThanEqual","greaterThan","greaterThanEqual","equal","notEqual","any","all","not","texture2D","texture2DProj","texture2DLod","texture2DProjLod","textureCube","textureCubeLod","dFdx","dFdy"];
},{}],111:[function(e,t,r){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],112:[function(e,t,r){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],113:[function(e,t,r){function n(e){var t=i(),r=[];return r=r.concat(t(e)),r=r.concat(t(null))}var i=e("./index");t.exports=n},{"./index":109}],114:[function(e,t,r){!function(e){function t(){var e=arguments[0],r=t.cache;return r[e]&&r.hasOwnProperty(e)||(r[e]=t.parse(e)),t.format.call(null,r[e],arguments)}function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(e,t){return Array(t+1).join(e)}var o={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};t.format=function(e,r){var a,s,u,l,c,f,h,p=1,d=e.length,g="",_=[],m=!0,v="";for(s=0;d>s;s++)if(g=n(e[s]),"string"===g)_[_.length]=e[s];else if("array"===g){if(l=e[s],l[2])for(a=r[p],u=0;u<l[2].length;u++){if(!a.hasOwnProperty(l[2][u]))throw new Error(t("[sprintf] property '%s' does not exist",l[2][u]));a=a[l[2][u]]}else a=l[1]?r[l[1]]:r[p++];if("function"==n(a)&&(a=a()),o.not_string.test(l[8])&&o.not_json.test(l[8])&&"number"!=n(a)&&isNaN(a))throw new TypeError(t("[sprintf] expecting number but found %s",n(a)));switch(o.number.test(l[8])&&(m=a>=0),l[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,l[6]?parseInt(l[6]):0);break;case"e":a=l[7]?a.toExponential(l[7]):a.toExponential();break;case"f":a=l[7]?parseFloat(a).toFixed(l[7]):parseFloat(a);break;case"g":a=l[7]?parseFloat(a).toPrecision(l[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&l[7]?a.substring(0,l[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}o.json.test(l[8])?_[_.length]=a:(!o.number.test(l[8])||m&&!l[3]?v="":(v=m?"+":"-",a=a.toString().replace(o.sign,"")),f=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",h=l[6]-(v+a).length,c=l[6]&&h>0?i(f,h):"",_[_.length]=l[5]?v+a+c:"0"===f?v+c+a:c+v+a)}return _.join("")},t.cache={},t.parse=function(e){for(var t=e,r=[],n=[],i=0;t;){if(null!==(r=o.text.exec(t)))n[n.length]=r[0];else if(null!==(r=o.modulo.exec(t)))n[n.length]="%";else{if(null===(r=o.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){i|=1;var a=[],s=r[2],u=[];if(null===(u=o.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=u[1];""!==(s=s.substring(u[0].length));)if(null!==(u=o.key_access.exec(s)))a[a.length]=u[1];else{if(null===(u=o.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=u[1]}r[2]=a}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n[n.length]=r}t=t.substring(r[0].length)}return n};var a=function(e,r,n){return n=(r||[]).slice(0),n.splice(0,0,e),t.apply(null,n)};"undefined"!=typeof r?(r.sprintf=t,r.vsprintf=a):(e.sprintf=t,e.vsprintf=a,"function"==typeof define&&define.amd&&define(function(){return{sprintf:t,vsprintf:a}}))}("undefined"==typeof window?this:window)},{}],115:[function(e,t,r){function n(){var e={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var r=t.valueOf(e);return r&&r.identity===e?r:i(t,e)}}var i=e("./hidden-store.js");t.exports=n},{"./hidden-store.js":116}],116:[function(e,t,r){function n(e,t){var r={identity:t},n=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:!0}),r}t.exports=n},{}],117:[function(e,t,r){function n(){var e=i();return{get:function(t,r){var n=e(t);return n.hasOwnProperty("value")?n.value:r},set:function(t,r){e(t).value=r},has:function(t){return"value"in e(t)},"delete":function(t){return delete e(t).value}}}var i=e("./create-store.js");t.exports=n},{"./create-store.js":115}],118:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{"cwise-compiler":119,dup:55}],119:[function(e,t,r){arguments[4][48][0].apply(r,arguments)},{"./lib/thunk.js":121,dup:48}],120:[function(e,t,r){arguments[4][49][0].apply(r,arguments)},{dup:49,uniq:122}],121:[function(e,t,r){arguments[4][50][0].apply(r,arguments)},{"./compile.js":120,dup:50}],122:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{dup:41}],123:[function(e,t,r){arguments[4][63][0].apply(r,arguments)},{dup:63}],124:[function(e,t,r){arguments[4][64][0].apply(r,arguments)},{dup:64}],125:[function(e,t,r){arguments[4][65][0].apply(r,arguments)},{"bit-twiddle":123,buffer:5,dup:65}],126:[function(e,t,r){"use strict";function n(e){_=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],m=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],v=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function i(e,t,r){var n=e.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(0>t||t>i||0>r||r>i)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,r],e.bind(),n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null),e._mipLevels=[0],e}function o(e,t,r,n,i,o){this.gl=e,this.handle=t,this.format=i,this.type=o,this._shape=[r,n],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var a=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return a._wrapS},set:function(e){return a.wrapS=e}},{get:function(){return a._wrapT},set:function(e){return a.wrapT=e}}]),this._wrapVector=s;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return a._shape[0]},set:function(e){return a.width=e}},{get:function(){return a._shape[1]},set:function(e){return a.height=e}}]),this._shapeVector=u}function a(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function s(e,t,r,n,i,o,s,u){var l=u.dtype,c=u.shape.slice();if(c.length<2||c.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var f=0,h=0,_=a(c,u.stride.slice());"float32"===l?f=e.FLOAT:"float64"===l?(f=e.FLOAT,_=!1,l="float32"):"uint8"===l?f=e.UNSIGNED_BYTE:(f=e.UNSIGNED_BYTE,_=!1,l="uint8");var m=1;if(2===c.length)h=e.LUMINANCE,c=[c[0],c[1],1],u=p(u.data,c,[u.stride[0],u.stride[1],1],u.offset);else{if(3!==c.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===c[2])h=e.ALPHA;else if(2===c[2])h=e.LUMINANCE_ALPHA;else if(3===c[2])h=e.RGB;else{if(4!==c[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");h=e.RGBA}m=c[2]}if(h!==e.LUMINANCE&&h!==e.ALPHA||i!==e.LUMINANCE&&i!==e.ALPHA||(h=i),h!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var v=u.size,E=s.indexOf(n)<0;if(E&&s.push(n),f===o&&_)0===u.offset&&u.data.length===v?E?e.texImage2D(e.TEXTURE_2D,n,i,c[0],c[1],0,i,o,u.data):e.texSubImage2D(e.TEXTURE_2D,n,t,r,c[0],c[1],i,o,u.data):E?e.texImage2D(e.TEXTURE_2D,n,i,c[0],c[1],0,i,o,u.data.subarray(u.offset,u.offset+v)):e.texSubImage2D(e.TEXTURE_2D,n,t,r,c[0],c[1],i,o,u.data.subarray(u.offset,u.offset+v));else{var b;b=o===e.FLOAT?g.mallocFloat32(v):g.mallocUint8(v);var w=p(b,c,[c[2],c[2]*c[0],1]);f===e.FLOAT&&o===e.UNSIGNED_BYTE?y(w,u):d.assign(w,u),E?e.texImage2D(e.TEXTURE_2D,n,i,c[0],c[1],0,i,o,b.subarray(0,v)):e.texSubImage2D(e.TEXTURE_2D,n,t,r,c[0],c[1],i,o,b.subarray(0,v)),o===e.FLOAT?g.freeFloat32(b):g.freeUint8(b)}}function u(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function l(e,t,r,n,i){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(0>t||t>a||0>r||r>a)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var s=u(e);return e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,i,null),new o(e,s,t,r,n,i)}function c(e,t,r,n){var i=u(e);return e.texImage2D(e.TEXTURE_2D,0,r,r,n,t),new o(e,i,0|t.width,0|t.height,r,n)}function f(e,t){var r=t.dtype,n=t.shape.slice(),i=e.getParameter(e.MAX_TEXTURE_SIZE);if(n[0]<0||n[0]>i||n[1]<0||n[1]>i)throw new Error("gl-texture2d: Invalid texture size");var s=a(n,t.stride.slice()),l=0;"float32"===r?l=e.FLOAT:"float64"===r?(l=e.FLOAT,s=!1,r="float32"):"uint8"===r?l=e.UNSIGNED_BYTE:(l=e.UNSIGNED_BYTE,s=!1,r="uint8");var c=0;if(2===n.length)c=e.LUMINANCE,n=[n[0],n[1],1],t=p(t.data,n,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==n.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===n[2])c=e.ALPHA;else if(2===n[2])c=e.LUMINANCE_ALPHA;else if(3===n[2])c=e.RGB;else{if(4!==n[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");c=e.RGBA}}l!==e.FLOAT||e.getExtension("OES_texture_float")||(l=e.UNSIGNED_BYTE,s=!1);var f,h,_=t.size;if(s)f=0===t.offset&&t.data.length===_?t.data:t.data.subarray(t.offset,t.offset+_);else{var m=[n[2],n[2]*n[0],1];h=g.malloc(_,r);var v=p(h,n,m,0);"float32"!==r&&"float64"!==r||l!==e.UNSIGNED_BYTE?d.assign(v,t):y(v,t),f=h.subarray(0,_)}var E=u(e);return e.texImage2D(e.TEXTURE_2D,0,c,n[0],n[1],0,c,l,f),s||g.free(h),new o(e,E,n[0],n[1],c,l)}function h(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(_||n(e),"number"==typeof arguments[1])return l(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return l(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1];if(t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof ImageData)return c(e,t,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return f(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var p=e("ndarray"),d=e("ndarray-ops"),g=e("typedarray-pool");t.exports=h;var _=null,m=null,v=null,y=function(e,t){d.muls(e,t,255)},E=o.prototype;Object.defineProperties(E,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&_.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),m.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&_.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),m.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var r=gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),v.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),v.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;2>t;++t)if(v.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return i(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return e=0|e,i(this,e,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e=0|e,i(this,this._shape[0],e),e}}}),E.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},E.dispose=function(){this.gl.deleteTexture(this.handle)},E.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},E.setPixels=function(e,t,r,n){var i=this.gl;if(this.bind(),Array.isArray(t)?(n=r,r=0|t[1],t=0|t[0]):(t=t||0,r=r||0),n=n||0,e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLVideoElement){var o=this._mipLevels.indexOf(n)<0;o?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,e),this._mipLevels.push(n)):i.texSubImage2D(i.TEXTURE_2D,n,t,r,this.format,this.type,e)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>n||r+e.shape[0]>this._shape[0]>>>n||0>t||0>r)throw new Error("gl-texture2d: Texture dimensions are out of bounds");s(i,t,r,n,this.format,this.type,this._mipLevels,e)}}},{ndarray:160,"ndarray-ops":118,"typedarray-pool":125}],127:[function(e,t,r){function n(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}t.exports=n},{}],128:[function(e,t,r){function n(e,t){var r=i(e[0],e[1],e[2]),n=i(t[0],t[1],t[2]);o(r,r),o(n,n);var s=a(r,n);return s>1?0:Math.acos(s)}t.exports=n;var i=e("./fromValues"),o=e("./normalize"),a=e("./dot")},{"./dot":135,"./fromValues":137,"./normalize":146}],129:[function(e,t,r){function n(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}t.exports=n},{}],130:[function(e,t,r){function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}t.exports=n},{}],131:[function(e,t,r){function n(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}t.exports=n},{}],132:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2];return e[0]=i*u-o*s,e[1]=o*a-n*u,e[2]=n*s-i*a,e}t.exports=n},{}],133:[function(e,t,r){function n(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}t.exports=n},{}],134:[function(e,t,r){function n(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}t.exports=n},{}],135:[function(e,t,r){function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=n},{}],136:[function(e,t,r){function n(e,t,r,n,o,a){var s,u;for(t||(t=3),r||(r=0),u=n?Math.min(n*t+r,e.length):e.length,s=r;u>s;s+=t)i[0]=e[s],i[1]=e[s+1],i[2]=e[s+2],o(i,i,a),e[s]=i[0],e[s+1]=i[1],e[s+2]=i[2];return e}t.exports=n;var i=e("./create")()},{"./create":131}],137:[function(e,t,r){function n(e,t,r){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}t.exports=n},{}],138:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":127,"./angle":128,"./clone":129,"./copy":130,"./create":131,"./cross":132,"./distance":133,"./divide":134,"./dot":135,"./forEach":136,"./fromValues":137,"./inverse":139,"./length":140,"./lerp":141,"./max":142,"./min":143,"./multiply":144,"./negate":145,"./normalize":146,"./random":147,"./rotateX":148,"./rotateY":149,"./rotateZ":150,"./scale":151,"./scaleAndAdd":152,"./set":153,"./squaredDistance":154,"./squaredLength":155,"./subtract":156,"./transformMat3":157,"./transformMat4":158,"./transformQuat":159}],139:[function(e,t,r){function n(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}t.exports=n},{}],140:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}t.exports=n},{}],141:[function(e,t,r){function n(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}t.exports=n},{}],142:[function(e,t,r){function n(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}t.exports=n},{}],143:[function(e,t,r){function n(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}t.exports=n},{}],144:[function(e,t,r){function n(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}t.exports=n},{}],145:[function(e,t,r){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}t.exports=n},{}],146:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}t.exports=n},{}],147:[function(e,t,r){function n(e,t){t=t||1;var r=2*Math.random()*Math.PI,n=2*Math.random()-1,i=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=n*t,e}t.exports=n},{}],148:[function(e,t,r){function n(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}t.exports=n},{}],149:[function(e,t,r){function n(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}t.exports=n},{}],150:[function(e,t,r){function n(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}t.exports=n},{}],151:[function(e,t,r){function n(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}t.exports=n},{}],152:[function(e,t,r){function n(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}t.exports=n},{}],153:[function(e,t,r){function n(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}t.exports=n},{}],154:[function(e,t,r){function n(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}t.exports=n},{}],155:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}t.exports=n},{}],156:[function(e,t,r){function n(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}t.exports=n},{}],157:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}t.exports=n},{}],158:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}t.exports=n},{}],159:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2],l=r[3],c=l*n+s*o-u*i,f=l*i+u*n-a*o,h=l*o+a*i-s*n,p=-a*n-s*i-u*o;return e[0]=c*l+p*-a+f*-u-h*-s,e[1]=f*l+p*-s+h*-a-c*-u,e[2]=h*l+p*-u+c*-s-f*-a,e}t.exports=n},{}],160:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{dup:60,"iota-array":161,"is-buffer":162}],161:[function(e,t,r){arguments[4][40][0].apply(r,arguments)},{dup:40}],162:[function(e,t,r){arguments[4][11][0].apply(r,arguments)},{dup:11}],163:[function(e,t,r){var n=e("events");t.exports=new n.EventEmitter},{events:9}],164:[function(e,t,r){var n=(e("events"),e("./server.js"),e("./block.js"));r.LoadTexture=function(t){var r=e("get-pixels");r(t,function(e,t){return e?void console.log("Bad image path"):void n.SaveTexture(t)})}},{"./block.js":1,"./server.js":163,events:9,"get-pixels":44}]},{},[3]);
